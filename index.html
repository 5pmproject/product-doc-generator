<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œí’ˆ ë¬¸ì„œ ìƒì„± ì‹œìŠ¤í…œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Lato:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lato', sans-serif;
            background: linear-gradient(135deg, #f5f1ed 0%, #e8e1d9 100%);
            min-height: 100vh;
            padding: 20px;
            color: #4a4237;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 16px;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: #6b5d52;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            color: #8b7d6b;
            font-size: 1rem;
            font-weight: 300;
        }

        .progress-container {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .workflow-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }

        .workflow-step {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f5f1ed;
            font-size: 0.85rem;
            color: #8b7d6b;
            transition: all 0.3s ease;
        }

        .workflow-step.active {
            background: #c9b5a0;
            color: #fff;
            font-weight: 600;
        }

        .workflow-step.completed {
            background: #6b9b6b;
            color: #fff;
        }

        .workflow-arrow {
            color: #c9b5a0;
            font-size: 1.2rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e8e1d9;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #c9b5a0 0%, #a89075 100%);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #8b7d6b;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(107, 93, 82, 0.1);
            display: none;
        }

        .form-card.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-number {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: #c9b5a0;
            opacity: 0.3;
            margin-bottom: 10px;
        }

        .question-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: #6b5d52;
            margin-bottom: 10px;
        }

        .question-desc {
            color: #8b7d6b;
            font-size: 0.95rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .input-group {
            margin-bottom: 20px;
        }

        textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid #e8e1d9;
            border-radius: 12px;
            font-family: 'Lato', sans-serif;
            font-size: 1rem;
            color: #4a4237;
            background: #fefdfb;
            resize: vertical;
            min-height: 120px;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #c9b5a0;
        }

        textarea.error {
            border-color: #d4a08a;
        }

        .char-counter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            font-size: 0.85rem;
            color: #8b7d6b;
        }

        .char-count {
            font-weight: 600;
        }

        .char-count.warning {
            color: #d4a08a;
        }

        .example-text {
            background: #f5f1ed;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 0.85rem;
            color: #8b7d6b;
            margin-top: 12px;
            border-left: 3px solid #c9b5a0;
        }

        .example-label {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }

        button {
            flex: 1;
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-family: 'Lato', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #c9b5a0 0%, #a89075 100%);
            color: #fff;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(168, 144, 117, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #e8e1d9;
            color: #6b5d52;
        }

        .btn-secondary:hover {
            background: #d9d0c5;
        }

        .auto-save-indicator {
            text-align: center;
            color: #8b7d6b;
            font-size: 0.85rem;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .auto-save-indicator.show {
            opacity: 1;
        }

        .completion-screen {
            display: none;
            text-align: center;
            padding: 60px 40px;
        }

        .completion-screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .completion-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .completion-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: #6b5d52;
            margin-bottom: 15px;
        }

        .completion-desc {
            color: #8b7d6b;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* BRD ìƒì„± í™”ë©´ */
        .document-screen {
            display: none;
            padding: 40px;
        }

        .document-screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .document-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e8e1d9;
        }

        .document-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: #6b5d52;
        }

        .document-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge-generating {
            background: #fff5e6;
            color: #d4a08a;
        }

        .badge-generated {
            background: #e8f5e8;
            color: #6b9b6b;
        }

        .badge-approved {
            background: #c9b5a0;
            color: #fff;
        }

        .generating-animation {
            text-align: center;
            padding: 60px 20px;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #e8e1d9;
            border-top-color: #c9b5a0;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 30px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .generating-text {
            font-size: 1.2rem;
            color: #6b5d52;
            margin-bottom: 10px;
        }

        .generating-subtext {
            color: #8b7d6b;
            font-size: 0.9rem;
        }

        .document-content {
            background: #fefdfb;
            border: 2px solid #e8e1d9;
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 30px;
            min-height: 400px;
            line-height: 1.8;
            font-size: 1rem;
            color: #4a4237;
        }

        .document-content h2 {
            font-family: 'Playfair Display', serif;
            color: #6b5d52;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .document-content h2:first-child {
            margin-top: 0;
        }

        .document-content h3 {
            font-family: 'Playfair Display', serif;
            color: #8b7d6b;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .document-content p {
            margin-bottom: 15px;
        }

        .document-content ul, .document-content ol {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        .document-content li {
            margin-bottom: 8px;
        }

        .document-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn-success {
            background: linear-gradient(135deg, #6b9b6b 0%, #5a8a5a 100%);
            color: #fff;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(107, 155, 107, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #c9b5a0;
            color: #6b5d52;
        }

        .btn-outline:hover {
            background: #c9b5a0;
            color: #fff;
        }

        .error-message {
            background: #ffe5e5;
            border: 2px solid #d4a08a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            color: #8b4a4a;
        }

        .error-message h3 {
            font-family: 'Playfair Display', serif;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .form-card {
                padding: 24px;
            }

            .question-title {
                font-size: 1.5rem;
            }

            .button-group {
                flex-direction: column;
            }

            .document-screen {
                padding: 24px;
            }

            .document-header {
                flex-direction: column;
                gap: 12px;
                align-items: flex-start;
            }

            .document-content {
                padding: 24px;
            }

            .document-actions {
                flex-direction: column;
            }

            .document-actions button {
                width: 100%;
            }

            .workflow-status {
                flex-wrap: wrap;
            }

            .workflow-step {
                font-size: 0.75rem;
                padding: 8px 4px;
            }

            .workflow-arrow {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ì œí’ˆ ë¬¸ì„œ ìƒì„± ì‹œìŠ¤í…œ</h1>
            <p class="subtitle">5ë¶„ë§Œ íˆ¬ìí•˜ë©´ ì „ë¬¸ì ì¸ BRD, PRD, TRDë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤</p>
        </header>

        <div class="progress-container">
            <div class="workflow-status" id="workflowStatus">
                <div class="workflow-step" data-step="input">ì…ë ¥</div>
                <div class="workflow-arrow">â†’</div>
                <div class="workflow-step" data-step="brd">BRD</div>
                <div class="workflow-arrow">â†’</div>
                <div class="workflow-step" data-step="prd">PRD</div>
                <div class="workflow-arrow">â†’</div>
                <div class="workflow-step" data-step="trd">TRD</div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text">
                <span id="progressText">ì§ˆë¬¸ 1 / 6</span>
                <span id="progressPercent">0% ì™„ë£Œ</span>
            </div>
        </div>

        <!-- Question 1 -->
        <div class="form-card active" data-step="1">
            <div class="question-number">01</div>
            <h2 class="question-title">í•µì‹¬ ì¸ì‚¬ì´íŠ¸</h2>
            <p class="question-desc">ë‹¹ì‹ ì´ ë°œê²¬í•œ ê°€ì¥ ì¤‘ìš”í•œ í†µì°°ì€ ë¬´ì—‡ì¸ê°€ìš”? ì´ ì œí’ˆì´ í•´ê²°í•˜ë ¤ëŠ” í•µì‹¬ ë¬¸ì œë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.</p>
            
            <div class="input-group">
                <textarea id="insight" maxlength="200" placeholder="ì˜ˆ: í˜„ì¬ ì‹œì¥ì—ì„œ ì‚¬ìš©ìë“¤ì€..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="insightCount">0 / 200ì</span>
                    <span id="insightStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">ğŸ’¡ ì˜ˆì‹œ</div>
                    ì†Œë¹„ìì˜ 80%ê°€ ì œí’ˆ ë¦¬ë·°ë¥¼ ì½ì§€ë§Œ, 70%ê°€ ë¦¬ë·°ì˜ ì‹ ë¢°ì„±ì„ ì˜ì‹¬í•©ë‹ˆë‹¤. ê²€ì¦ëœ êµ¬ë§¤ìì˜ ì‹¤ì œ ê²½í—˜ì„ íš¨ê³¼ì ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì´ í•„ìš”í•©ë‹ˆë‹¤.
                </div>
            </div>
        </div>

        <!-- Question 2 -->
        <div class="form-card" data-step="2">
            <div class="question-number">02</div>
            <h2 class="question-title">ê²€ì¦ ê·¼ê±°</h2>
            <p class="question-desc">ì´ ì¸ì‚¬ì´íŠ¸ë¥¼ ë’·ë°›ì¹¨í•˜ëŠ” ë°ì´í„°ë‚˜ ê·¼ê±°ê°€ ìˆë‚˜ìš”? ì‹œì¥ ì¡°ì‚¬, ì‚¬ìš©ì ì¸í„°ë·°, ë°ì´í„° ë¶„ì„ ê²°ê³¼ ë“±ì„ ê³µìœ í•´ì£¼ì„¸ìš”.</p>
            
            <div class="input-group">
                <textarea id="validation" maxlength="150" placeholder="ì˜ˆ: 500ëª… ì‚¬ìš©ì ì¸í„°ë·° ê²°ê³¼..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="validationCount">0 / 150ì</span>
                    <span id="validationStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">ğŸ’¡ ì˜ˆì‹œ</div>
                    3ê°œì›”ê°„ 500ëª… ëŒ€ìƒ ì„¤ë¬¸ ê²°ê³¼, ê°€ì§œ ë¦¬ë·° ë•Œë¬¸ì— êµ¬ë§¤ë¥¼ í¬ê¸°í•œ ê²½í—˜ì´ í‰ê·  3.2íšŒ. A/B í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê²€ì¦ëœ ë¦¬ë·°ëŠ” ì „í™˜ìœ¨ 45% í–¥ìƒ.
                </div>
            </div>
        </div>

        <!-- Question 3 -->
        <div class="form-card" data-step="3">
            <div class="question-number">03</div>
            <h2 class="question-title">íŒ€ ì—­ëŸ‰</h2>
            <p class="question-desc">ì´ í”„ë¡œì íŠ¸ë¥¼ ì„±ê³µì‹œí‚¬ ìˆ˜ ìˆëŠ” íŒ€ì˜ ê°•ì ì€ ë¬´ì—‡ì¸ê°€ìš”? ë³´ìœ í•œ ê¸°ìˆ , ê²½í—˜, ìì›ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.</p>
            
            <div class="input-group">
                <textarea id="capability" maxlength="150" placeholder="ì˜ˆ: ìš°ë¦¬ íŒ€ì€..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="capabilityCount">0 / 150ì</span>
                    <span id="capabilityStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">ğŸ’¡ ì˜ˆì‹œ</div>
                    AI/ML ì „ë¬¸ê°€ 3ëª…, ì „ììƒê±°ë˜ í”Œë«í¼ ê°œë°œ ê²½í—˜ 5ë…„, ìì—°ì–´ ì²˜ë¦¬ ëª¨ë¸ êµ¬ì¶• ê²½í—˜. ì´ì „ í”„ë¡œì íŠ¸ì—ì„œ 10ë§Œ ì‚¬ìš©ì ê·œëª¨ ì„œë¹„ìŠ¤ ìš´ì˜.
                </div>
            </div>
        </div>

        <!-- Question 4 -->
        <div class="form-card" data-step="4">
            <div class="question-number">04</div>
            <h2 class="question-title">ì ˆëŒ€ ì›ì¹™</h2>
            <p class="question-desc">ì´ ì œí’ˆ ê°œë°œì—ì„œ ì ˆëŒ€ íƒ€í˜‘í•  ìˆ˜ ì—†ëŠ” ì›ì¹™ì´ë‚˜ ê°€ì¹˜ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</p>
            
            <div class="input-group">
                <textarea id="principle" maxlength="100" placeholder="ì˜ˆ: ì‚¬ìš©ì í”„ë¼ì´ë²„ì‹œëŠ”..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="principleCount">0 / 100ì</span>
                    <span id="principleStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">ğŸ’¡ ì˜ˆì‹œ</div>
                    íˆ¬ëª…ì„±ê³¼ ì •ì§í•¨. ëª¨ë“  ë¦¬ë·°ëŠ” ì‹¤ì œ êµ¬ë§¤ìë§Œ ì‘ì„± ê°€ëŠ¥í•˜ë©°, ì¡°ì‘ì´ë‚˜ ê°€ì§œ ë¦¬ë·°ëŠ” ì ˆëŒ€ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                </div>
            </div>
        </div>

        <!-- Question 5 -->
        <div class="form-card" data-step="5">
            <div class="question-number">05</div>
            <h2 class="question-title">ì„±ê³µ ì •ì˜</h2>
            <p class="question-desc">ì´ ì œí’ˆì´ ì„±ê³µí–ˆë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆëŠ” ê¸°ì¤€ì€ ë¬´ì—‡ì¸ê°€ìš”? êµ¬ì²´ì ì¸ ì§€í‘œë‚˜ ëª©í‘œë¥¼ ì œì‹œí•´ì£¼ì„¸ìš”.</p>
            
            <div class="input-group">
                <textarea id="success" maxlength="100" placeholder="ì˜ˆ: 6ê°œì›” ë‚´..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="successCount">0 / 100ì</span>
                    <span id="successStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">ğŸ’¡ ì˜ˆì‹œ</div>
                    6ê°œì›” ë‚´ ì›”ê°„ í™œì„± ì‚¬ìš©ì 5ë§Œëª…, ë¦¬ë·° ì‹ ë¢°ë„ í‰ê°€ 4.5/5 ì´ìƒ, êµ¬ë§¤ ì „í™˜ìœ¨ ê¸°ì¡´ ëŒ€ë¹„ 30% í–¥ìƒ.
                </div>
            </div>
        </div>

        <!-- Question 6 -->
        <div class="form-card" data-step="6">
            <div class="question-number">06</div>
            <h2 class="question-title">í•µì‹¬ ê¸°ëŠ¥ ì•„ì´ë””ì–´</h2>
            <p class="question-desc">ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ í•µì‹¬ ê¸°ëŠ¥ì´ë‚˜ ì†”ë£¨ì…˜ ì•„ì´ë””ì–´ë¥¼ ê°„ë‹¨íˆ ì„¤ëª…í•´ì£¼ì„¸ìš”.</p>
            
            <div class="input-group">
                <textarea id="feature" maxlength="150" placeholder="ì˜ˆ: AI ê¸°ë°˜..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="featureCount">0 / 150ì</span>
                    <span id="featureStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">ğŸ’¡ ì˜ˆì‹œ</div>
                    AI ê¸°ë°˜ ë¦¬ë·° ê²€ì¦ ì‹œìŠ¤í…œ: êµ¬ë§¤ ì´ë ¥ í™•ì¸, í…ìŠ¤íŠ¸ ë¶„ì„ìœ¼ë¡œ ê°€ì§œ ë¦¬ë·° íƒì§€, ê²€ì¦ ë°°ì§€ ë¶€ì—¬. ì‚¬ìš©ìëŠ” ì‹ ë¢°ë„ ì ìˆ˜ë¥¼ ì‹¤ì‹œê°„ í™•ì¸ ê°€ëŠ¥.
                </div>
            </div>
        </div>

        <!-- Completion Screen -->
        <div class="form-card completion-screen" id="completionScreen">
            <div class="completion-icon">âœ¨</div>
            <h2 class="completion-title">ì…ë ¥ ì™„ë£Œ!</h2>
            <p class="completion-desc">
                ëª¨ë“  ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                ì´ì œ ì „ë¬¸ì ì¸ BRD ë¬¸ì„œë¥¼ ìƒì„±í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.
            </p>
            <button class="btn-primary" onclick="startBRDGeneration()">BRD ìƒì„±í•˜ê¸°</button>
        </div>

        <!-- BRD ìƒì„± í™”ë©´ -->
        <div class="form-card document-screen" id="brdScreen">
            <div class="document-header">
                <h2 class="document-title">Business Requirements Document</h2>
                <span class="document-badge badge-generating" id="brdBadge">ìƒì„± ì¤‘</span>
            </div>

            <!-- ìƒì„± ì¤‘ ì• ë‹ˆë©”ì´ì…˜ -->
            <div class="generating-animation" id="brdGenerating">
                <div class="spinner"></div>
                <div class="generating-text">BRDë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
                <div class="generating-subtext">Claude AIê°€ í”„ë¡œì íŠ¸ ë°ì´í„°ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤</div>
            </div>

            <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
            <div class="error-message" id="brdError" style="display: none;">
                <h3>âš ï¸ ìƒì„± ì˜¤ë¥˜</h3>
                <p id="brdErrorText"></p>
                <button class="btn-primary" onclick="retryBRDGeneration()">ë‹¤ì‹œ ì‹œë„</button>
            </div>

            <!-- ìƒì„±ëœ ë¬¸ì„œ ë‚´ìš© -->
            <div id="brdContentWrapper" style="display: none;">
                <div class="document-content" id="brdContent"></div>
                
                <div class="document-actions">
                    <button class="btn-success" onclick="approveBRD()">âœ“ ìŠ¹ì¸í•˜ê³  PRD ìƒì„±</button>
                    <button class="btn-outline" onclick="regenerateBRD()">â†» ë‹¤ì‹œ ìƒì„±</button>
                    <button class="btn-outline" onclick="copyBRD()">ğŸ“‹ ë³µì‚¬</button>
                    <button class="btn-outline" onclick="exportBRDtoPDF()">ğŸ“„ PDF ë‚´ë³´ë‚´ê¸°</button>
                </div>
            </div>
        </div>

        <!-- PRD ìƒì„± í™”ë©´ -->
        <div class="form-card document-screen" id="prdScreen">
            <div class="document-header">
                <h2 class="document-title">Product Requirements Document</h2>
                <span class="document-badge badge-generating" id="prdBadge">ìƒì„± ì¤‘</span>
            </div>

            <div class="generating-animation" id="prdGenerating">
                <div class="spinner"></div>
                <div class="generating-text">PRDë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
                <div class="generating-subtext">BRDë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„¸ ìš”êµ¬ì‚¬í•­ì„ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤</div>
            </div>

            <div class="error-message" id="prdError" style="display: none;">
                <h3>âš ï¸ ìƒì„± ì˜¤ë¥˜</h3>
                <p id="prdErrorText"></p>
                <button class="btn-primary" onclick="retryPRDGeneration()">ë‹¤ì‹œ ì‹œë„</button>
            </div>

            <div id="prdContentWrapper" style="display: none;">
                <div class="document-content" id="prdContent"></div>
                
                <div class="document-actions">
                    <button class="btn-success" onclick="approvePRD()">âœ“ ìŠ¹ì¸í•˜ê³  TRD ìƒì„±</button>
                    <button class="btn-outline" onclick="regeneratePRD()">â†» ë‹¤ì‹œ ìƒì„±</button>
                    <button class="btn-outline" onclick="copyPRD()">ğŸ“‹ ë³µì‚¬</button>
                    <button class="btn-outline" onclick="exportPRDtoPDF()">ğŸ“„ PDF ë‚´ë³´ë‚´ê¸°</button>
                    <button class="btn-outline" onclick="skipToComplete()">ê±´ë„ˆë›°ê¸°</button>
                </div>
            </div>
        </div>

        <!-- TRD ìƒì„± í™”ë©´ -->
        <div class="form-card document-screen" id="trdScreen">
            <div class="document-header">
                <h2 class="document-title">Technical Requirements Document</h2>
                <span class="document-badge badge-generating" id="trdBadge">ìƒì„± ì¤‘</span>
            </div>

            <div class="generating-animation" id="trdGenerating">
                <div class="spinner"></div>
                <div class="generating-text">TRDë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
                <div class="generating-subtext">ê¸°ìˆ  ìŠ¤í™ê³¼ ì•„í‚¤í…ì²˜ë¥¼ ì„¤ê³„ ì¤‘ì…ë‹ˆë‹¤</div>
            </div>

            <div class="error-message" id="trdError" style="display: none;">
                <h3>âš ï¸ ìƒì„± ì˜¤ë¥˜</h3>
                <p id="trdErrorText"></p>
                <button class="btn-primary" onclick="retryTRDGeneration()">ë‹¤ì‹œ ì‹œë„</button>
            </div>

            <div id="trdContentWrapper" style="display: none;">
                <div class="document-content" id="trdContent"></div>
                
                <div class="document-actions">
                    <button class="btn-success" onclick="completeProject()">âœ“ í”„ë¡œì íŠ¸ ì™„ë£Œ</button>
                    <button class="btn-outline" onclick="regenerateTRD()">â†» ë‹¤ì‹œ ìƒì„±</button>
                    <button class="btn-outline" onclick="copyTRD()">ğŸ“‹ ë³µì‚¬</button>
                    <button class="btn-outline" onclick="exportTRDtoPDF()">ğŸ“„ PDF ë‚´ë³´ë‚´ê¸°</button>
                </div>
            </div>
        </div>

        <!-- ìµœì¢… ì™„ë£Œ í™”ë©´ -->
        <div class="form-card completion-screen" id="finalCompletionScreen">
            <div class="completion-icon">ğŸ‰</div>
            <h2 class="completion-title">ëª¨ë“  ë¬¸ì„œ ìƒì„± ì™„ë£Œ!</h2>
            <p class="completion-desc">
                BRD, PRD, TRDê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                ëª¨ë“  ë¬¸ì„œë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
            <div class="document-actions" style="justify-content: center;">
                <button class="btn-primary" onclick="downloadAllDocuments()">ğŸ“¦ ëª¨ë“  ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ</button>
                <button class="btn-outline" onclick="startNewProject()">ğŸ”„ ìƒˆ í”„ë¡œì íŠ¸ ì‹œì‘</button>
            </div>
        </div>

        <div class="button-group" id="navigationButtons">
            <button class="btn-secondary" id="prevBtn" onclick="prevStep()" style="display: none;">ì´ì „</button>
            <button class="btn-primary" id="nextBtn" onclick="nextStep()" disabled>ë‹¤ìŒ</button>
        </div>

        <div class="auto-save-indicator" id="autoSaveIndicator">
            ğŸ’¾ ìë™ ì €ì¥ë¨
        </div>
    </div>

    <script>
        // UUID ìƒì„± í•¨ìˆ˜
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0;
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // í”„ë¡œì íŠ¸ ë°ì´í„° êµ¬ì¡°
        class ProjectData {
            constructor() {
                this.id = generateUUID();
                this.created_at = new Date().toISOString();
                this.updated_at = new Date().toISOString();
                this.status = 'input';
                
                this.user_input = {
                    insight: '',
                    evidence: '',
                    capability: '',
                    principle: '',
                    success_metric: '',
                    core_features: ''
                };
                
                this.documents = {
                    brd: {
                        content: '',
                        status: 'pending',
                        generated_at: null,
                        version: 0
                    },
                    prd: {
                        content: '',
                        status: 'pending',
                        generated_at: null,
                        version: 0
                    },
                    trd: {
                        content: '',
                        status: 'pending',
                        generated_at: null,
                        version: 0
                    }
                };
                
                this.structured_data = {
                    personas: [],
                    features: [],
                    metrics: [],
                    technical_specs: []
                };

                this.history = [];
            }

            // ë°ì´í„° ì—…ë°ì´íŠ¸
            updateUserInput(field, value) {
                this.user_input[field] = value;
                this.updated_at = new Date().toISOString();
                this.addHistory('user_input_updated', { field, value });
                this.save();
            }

            // ìƒíƒœ ë³€ê²½
            updateStatus(newStatus) {
                const oldStatus = this.status;
                this.status = newStatus;
                this.updated_at = new Date().toISOString();
                this.addHistory('status_changed', { from: oldStatus, to: newStatus });
                this.save();
            }

            // ë¬¸ì„œ ìƒì„± ì‹œì‘
            startDocumentGeneration(docType) {
                this.documents[docType].status = 'generating';
                this.updated_at = new Date().toISOString();
                this.addHistory('document_generation_started', { type: docType });
                this.save();
            }

            // ë¬¸ì„œ ìƒì„± ì™„ë£Œ
            completeDocumentGeneration(docType, content) {
                this.documents[docType].content = content;
                this.documents[docType].status = 'generated';
                this.documents[docType].generated_at = new Date().toISOString();
                this.documents[docType].version++;
                this.updated_at = new Date().toISOString();
                this.addHistory('document_generated', { type: docType, version: this.documents[docType].version });
                this.save();
            }

            // ë¬¸ì„œ ìŠ¹ì¸
            approveDocument(docType) {
                this.documents[docType].status = 'approved';
                this.updated_at = new Date().toISOString();
                this.addHistory('document_approved', { type: docType });
                this.save();
            }

            // êµ¬ì¡°í™”ëœ ë°ì´í„° ì¶”ê°€
            addStructuredData(category, data) {
                this.structured_data[category].push({
                    id: generateUUID(),
                    ...data,
                    created_at: new Date().toISOString()
                });
                this.updated_at = new Date().toISOString();
                this.addHistory('structured_data_added', { category, data });
                this.save();
            }

            // íˆìŠ¤í† ë¦¬ ì¶”ê°€
            addHistory(action, details) {
                this.history.push({
                    timestamp: new Date().toISOString(),
                    action,
                    details
                });
            }

            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            save() {
                try {
                    localStorage.setItem('projectData', JSON.stringify(this));
                    localStorage.setItem('projectData_backup_' + Date.now(), JSON.stringify(this));
                    console.log('âœ… í”„ë¡œì íŠ¸ ë°ì´í„° ì €ì¥ ì™„ë£Œ:', this.id);
                    return true;
                } catch (e) {
                    console.error('âŒ ì €ì¥ ì‹¤íŒ¨:', e);
                    return false;
                }
            }

            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°
            static load() {
                try {
                    const saved = localStorage.getItem('projectData');
                    if (saved) {
                        const data = JSON.parse(saved);
                        const project = new ProjectData();
                        Object.assign(project, data);
                        console.log('âœ… í”„ë¡œì íŠ¸ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', project.id);
                        return project;
                    }
                } catch (e) {
                    console.error('âŒ ë¡œë“œ ì‹¤íŒ¨:', e);
                }
                return new ProjectData();
            }

            // ì§„í–‰ë¥  ê³„ì‚°
            getProgress() {
                const fields = Object.values(this.user_input);
                const completed = fields.filter(v => v && v.trim().length > 0).length;
                return {
                    completed,
                    total: fields.length,
                    percentage: Math.round((completed / fields.length) * 100)
                };
            }

            // ì…ë ¥ ì™„ë£Œ ì—¬ë¶€ í™•ì¸
            isInputComplete() {
                return Object.values(this.user_input).every(v => v && v.trim().length > 0);
            }

            // ë°ì´í„° ë‚´ë³´ë‚´ê¸° (JSON)
            exportJSON() {
                return JSON.stringify(this, null, 2);
            }

            // ë°ì´í„° ìš”ì•½
            getSummary() {
                const progress = this.getProgress();
                return {
                    id: this.id,
                    created: new Date(this.created_at).toLocaleString('ko-KR'),
                    updated: new Date(this.updated_at).toLocaleString('ko-KR'),
                    status: this.status,
                    progress: `${progress.completed}/${progress.total} (${progress.percentage}%)`,
                    documents: {
                        brd: this.documents.brd.status,
                        prd: this.documents.prd.status,
                        trd: this.documents.trd.status
                    }
                };
            }
        }

        // ì „ì—­ í”„ë¡œì íŠ¸ ì¸ìŠ¤í„´ìŠ¤
        let projectData = ProjectData.load();

        // ìƒíƒœ ê´€ë¦¬
        let currentStep = 1;
        const totalSteps = 6;
        
        // í•„ë“œ ë§¤í•‘ (í™”ë©´ ID -> ë°ì´í„° êµ¬ì¡°)
        const fieldMapping = {
            insight: 'insight',
            validation: 'evidence',
            capability: 'capability',
            principle: 'principle',
            success: 'success_metric',
            feature: 'core_features'
        };

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        function loadSavedData() {
            const saved = localStorage.getItem('productDocData');
            if (saved) {
                const data = JSON.parse(saved);
                Object.assign(formData, data);
                
                // ì…ë ¥ í•„ë“œì— ì €ì¥ëœ ë°ì´í„° ì±„ìš°ê¸°
                Object.keys(formData).forEach(key => {
                    const element = document.getElementById(key);
                    if (element && formData[key]) {
                        element.value = formData[key];
                        updateCharCount(key);
                    }
                });
            }
        }

        // ìë™ ì €ì¥
        function autoSave() {
            localStorage.setItem('productDocData', JSON.stringify(formData));
            showAutoSaveIndicator();
        }

        function showAutoSaveIndicator() {
            const indicator = document.getElementById('autoSaveIndicator');
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }

        // ê¸€ììˆ˜ ì¹´ìš´í„° ì—…ë°ì´íŠ¸
        function updateCharCount(fieldId) {
            const textarea = document.getElementById(fieldId);
            const counter = document.getElementById(fieldId + 'Count');
            const status = document.getElementById(fieldId + 'Status');
            const maxLength = textarea.maxLength;
            const currentLength = textarea.value.length;
            
            counter.textContent = `${currentLength} / ${maxLength}ì`;
            
            if (currentLength > maxLength * 0.9) {
                counter.classList.add('warning');
            } else {
                counter.classList.remove('warning');
            }

            // ìœ íš¨ì„± ê²€ì‚¬
            if (currentLength > 0) {
                status.textContent = 'âœ“';
                status.style.color = '#a89075';
                textarea.classList.remove('error');
            } else {
                status.textContent = '';
                textarea.classList.add('error');
            }

            // ë°ì´í„° ì €ì¥
            formData[fieldId] = textarea.value;
            autoSave();

            // ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
            updateNextButton();
        }

        // ë‹¤ìŒ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateNextButton() {
            const nextBtn = document.getElementById('nextBtn');
            const currentField = getCurrentFieldId();
            const currentValue = formData[currentField];
            
            if (currentValue && currentValue.trim().length > 0) {
                nextBtn.disabled = false;
            } else {
                nextBtn.disabled = true;
            }
        }

        // í˜„ì¬ í•„ë“œ ID ê°€ì ¸ì˜¤ê¸°
        function getCurrentFieldId() {
            const fields = ['insight', 'validation', 'capability', 'principle', 'success', 'feature'];
            return fields[currentStep - 1];
        }

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateProgress() {
            const progress = ((currentStep - 1) / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `ì§ˆë¬¸ ${currentStep} / ${totalSteps}`;
            document.getElementById('progressPercent').textContent = `${Math.round(progress)}% ì™„ë£Œ`;
        }

        // ë‹¤ìŒ ë‹¨ê³„
        function nextStep() {
            if (currentStep < totalSteps) {
                // í˜„ì¬ ì¹´ë“œ ìˆ¨ê¸°ê¸°
                document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.remove('active');
                
                currentStep++;
                
                // ë‹¤ìŒ ì¹´ë“œ ë³´ì´ê¸°
                document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.add('active');
                
                updateProgress();
                updateNextButton();
                
                // ë²„íŠ¼ í‘œì‹œ ì¡°ì •
                document.getElementById('prevBtn').style.display = 'block';
                
                if (currentStep === totalSteps) {
                    document.getElementById('nextBtn').textContent = 'ì™„ë£Œ';
                }
                
                // ìŠ¤í¬ë¡¤ ë§¨ ìœ„ë¡œ
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                showCompletion();
            }
        }

        // ì´ì „ ë‹¨ê³„
        function prevStep() {
            if (currentStep > 1) {
                document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.remove('active');
                
                currentStep--;
                
                document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.add('active');
                
                updateProgress();
                updateNextButton();
                
                if (currentStep === 1) {
                    document.getElementById('prevBtn').style.display = 'none';
                }
                
                document.getElementById('nextBtn').textContent = 'ë‹¤ìŒ';
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // ì™„ë£Œ í™”ë©´ í‘œì‹œ
        function showCompletion() {
            document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.remove('active');
            document.getElementById('completionScreen').classList.add('active');
            document.getElementById('navigationButtons').style.display = 'none';
            
            // ì§„í–‰ë¥  100%
            document.getElementById('progressFill').style.width = '100%';
            document.getElementById('progressText').textContent = 'ì™„ë£Œ!';
            document.getElementById('progressPercent').textContent = '100% ì™„ë£Œ';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ë¬¸ì„œ ìƒì„± (ë‹¤ìŒ ë‹¨ê³„ë¡œ ì—°ê²°ë  í•¨ìˆ˜)
        function generateDocuments() {
            alert('Phase 2: BRD, PRD, TRD ë¬¸ì„œ ìƒì„± ê¸°ëŠ¥ì´ ê³§ ì¶”ê°€ë©ë‹ˆë‹¤!\n\nì…ë ¥ëœ ë°ì´í„°:\n' + JSON.stringify(formData, null, 2));
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function() {
            // ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
            loadSavedData();
            
            // ê° textareaì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            const fields = ['insight', 'validation', 'capability', 'principle', 'success', 'feature'];
            fields.forEach(fieldId => {
                const textarea = document.getElementById(fieldId);
                textarea.addEventListener('input', () => updateCharCount(fieldId));
                textarea.addEventListener('blur', autoSave);
            });

            // ì´ˆê¸° ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateProgress();
            updateNextButton();
        });

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                if (!document.getElementById('nextBtn').disabled) {
                    nextStep();
                }
            }
        });
    </script>
</body>
</html>
