<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>?쒗뭹 臾몄꽌 ?앹꽦 ?쒖뒪??/title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Lato:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lato', sans-serif;
            background: linear-gradient(135deg, #f5f1ed 0%, #e8e1d9 100%);
            min-height: 100vh;
            padding: 20px;
            color: #4a4237;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 16px;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: #6b5d52;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            color: #8b7d6b;
            font-size: 1rem;
            font-weight: 300;
        }

        .progress-container {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .workflow-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }

        .workflow-step {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f5f1ed;
            font-size: 0.85rem;
            color: #8b7d6b;
            transition: all 0.3s ease;
        }

        .workflow-step.active {
            background: #c9b5a0;
            color: #fff;
            font-weight: 600;
        }

        .workflow-step.completed {
            background: #6b9b6b;
            color: #fff;
        }

        .workflow-arrow {
            color: #c9b5a0;
            font-size: 1.2rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e8e1d9;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #c9b5a0 0%, #a89075 100%);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #8b7d6b;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(107, 93, 82, 0.1);
            display: none;
        }

        .form-card.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-number {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: #c9b5a0;
            opacity: 0.3;
            margin-bottom: 10px;
        }

        .question-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: #6b5d52;
            margin-bottom: 10px;
        }

        .question-desc {
            color: #8b7d6b;
            font-size: 0.95rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .input-group {
            margin-bottom: 20px;
        }

        textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid #e8e1d9;
            border-radius: 12px;
            font-family: 'Lato', sans-serif;
            font-size: 1rem;
            color: #4a4237;
            background: #fefdfb;
            resize: vertical;
            min-height: 120px;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #c9b5a0;
        }

        textarea.error {
            border-color: #d4a08a;
        }

        .char-counter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            font-size: 0.85rem;
            color: #8b7d6b;
        }

        .char-count {
            font-weight: 600;
        }

        .char-count.warning {
            color: #d4a08a;
        }

        .example-text {
            background: #f5f1ed;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 0.85rem;
            color: #8b7d6b;
            margin-top: 12px;
            border-left: 3px solid #c9b5a0;
        }

        .example-label {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }

        button {
            flex: 1;
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-family: 'Lato', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #c9b5a0 0%, #a89075 100%);
            color: #fff;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(168, 144, 117, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #e8e1d9;
            color: #6b5d52;
        }

        .btn-secondary:hover {
            background: #d9d0c5;
        }

        .auto-save-indicator {
            text-align: center;
            color: #8b7d6b;
            font-size: 0.85rem;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .auto-save-indicator.show {
            opacity: 1;
        }

        .completion-screen {
            display: none;
            text-align: center;
            padding: 60px 40px;
        }

        .completion-screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .completion-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .completion-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: #6b5d52;
            margin-bottom: 15px;
        }

        .completion-desc {
            color: #8b7d6b;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* BRD ?앹꽦 ?붾㈃ */
        .document-screen {
            display: none;
            padding: 40px;
        }

        .document-screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .document-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e8e1d9;
        }

        .document-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: #6b5d52;
        }

        .document-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge-generating {
            background: #fff5e6;
            color: #d4a08a;
        }

        .badge-generated {
            background: #e8f5e8;
            color: #6b9b6b;
        }

        .badge-approved {
            background: #c9b5a0;
            color: #fff;
        }

        .generating-animation {
            text-align: center;
            padding: 60px 20px;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #e8e1d9;
            border-top-color: #c9b5a0;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 30px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .generating-text {
            font-size: 1.2rem;
            color: #6b5d52;
            margin-bottom: 10px;
        }

        .generating-subtext {
            color: #8b7d6b;
            font-size: 0.9rem;
        }

        .document-content {
            background: #fefdfb;
            border: 2px solid #e8e1d9;
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 30px;
            min-height: 400px;
            line-height: 1.8;
            font-size: 1rem;
            color: #4a4237;
        }

        .document-content h2 {
            font-family: 'Playfair Display', serif;
            color: #6b5d52;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .document-content h2:first-child {
            margin-top: 0;
        }

        .document-content h3 {
            font-family: 'Playfair Display', serif;
            color: #8b7d6b;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .document-content p {
            margin-bottom: 15px;
        }

        .document-content ul, .document-content ol {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        .document-content li {
            margin-bottom: 8px;
        }

        .document-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn-success {
            background: linear-gradient(135deg, #6b9b6b 0%, #5a8a5a 100%);
            color: #fff;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(107, 155, 107, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #c9b5a0;
            color: #6b5d52;
        }

        .btn-outline:hover {
            background: #c9b5a0;
            color: #fff;
        }

        .error-message {
            background: #ffe5e5;
            border: 2px solid #d4a08a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            color: #8b4a4a;
        }

        .error-message h3 {
            font-family: 'Playfair Display', serif;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .form-card {
                padding: 24px;
            }

            .question-title {
                font-size: 1.5rem;
            }

            .button-group {
                flex-direction: column;
            }

            .document-screen {
                padding: 24px;
            }

            .document-header {
                flex-direction: column;
                gap: 12px;
                align-items: flex-start;
            }

            .document-content {
                padding: 24px;
            }

            .document-actions {
                flex-direction: column;
            }

            .document-actions button {
                width: 100%;
            }

            .workflow-status {
                flex-wrap: wrap;
            }

            .workflow-step {
                font-size: 0.75rem;
                padding: 8px 4px;
            }

            .workflow-arrow {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>?쒗뭹 臾몄꽌 ?앹꽦 ?쒖뒪??/h1>
            <p class="subtitle">5遺꾨쭔 ?ъ옄?섎㈃ ?꾨Ц?곸씤 BRD, PRD, TRD瑜??먮룞 ?앹꽦?⑸땲??/p>
        </header>

        <div class="progress-container">
            <div class="workflow-status" id="workflowStatus">
                <div class="workflow-step" data-step="input">?낅젰</div>
                <div class="workflow-arrow">??/div>
                <div class="workflow-step" data-step="brd">BRD</div>
                <div class="workflow-arrow">??/div>
                <div class="workflow-step" data-step="prd">PRD</div>
                <div class="workflow-arrow">??/div>
                <div class="workflow-step" data-step="trd">TRD</div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text">
                <span id="progressText">吏덈Ц 1 / 6</span>
                <span id="progressPercent">0% ?꾨즺</span>
            </div>
        </div>

        <!-- Question 1 -->
        <div class="form-card active" data-step="1">
            <div class="question-number">01</div>
            <h2 class="question-title">?듭떖 ?몄궗?댄듃</h2>
            <p class="question-desc">?뱀떊??諛쒓껄??媛??以묒슂???듭같? 臾댁뾿?멸??? ???쒗뭹???닿껐?섎젮???듭떖 臾몄젣瑜??ㅻ챸?댁＜?몄슂.</p>
            
            <div class="input-group">
                <textarea id="insight" maxlength="200" placeholder="?? ?꾩옱 ?쒖옣?먯꽌 ?ъ슜?먮뱾?..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="insightCount">0 / 200??/span>
                    <span id="insightStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">?뮕 ?덉떆</div>
                    ?뚮퉬?먯쓽 80%媛 ?쒗뭹 由щ럭瑜??쎌?留? 70%媛 由щ럭???좊ː?깆쓣 ?섏떖?⑸땲?? 寃利앸맂 援щℓ?먯쓽 ?ㅼ젣 寃쏀뿕???④낵?곸쑝濡??꾨떖?섎뒗 諛⑸쾿???꾩슂?⑸땲??
                </div>
            </div>
        </div>

        <!-- Question 2 -->
        <div class="form-card" data-step="2">
            <div class="question-number">02</div>
            <h2 class="question-title">寃利?洹쇨굅</h2>
            <p class="question-desc">???몄궗?댄듃瑜??룸컺移⑦븯???곗씠?곕굹 洹쇨굅媛 ?덈굹?? ?쒖옣 議곗궗, ?ъ슜???명꽣酉? ?곗씠??遺꾩꽍 寃곌낵 ?깆쓣 怨듭쑀?댁＜?몄슂.</p>
            
            <div class="input-group">
                <textarea id="validation" maxlength="150" placeholder="?? 500紐??ъ슜???명꽣酉?寃곌낵..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="validationCount">0 / 150??/span>
                    <span id="validationStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">?뮕 ?덉떆</div>
                    3媛쒖썡媛?500紐?????ㅻЦ 寃곌낵, 媛吏?由щ럭 ?뚮Ц??援щℓ瑜??ш린??寃쏀뿕???됯퇏 3.2?? A/B ?뚯뒪??寃곌낵 寃利앸맂 由щ럭???꾪솚??45% ?μ긽.
                </div>
            </div>
        </div>

        <!-- Question 3 -->
        <div class="form-card" data-step="3">
            <div class="question-number">03</div>
            <h2 class="question-title">? ??웾</h2>
            <p class="question-desc">???꾨줈?앺듃瑜??깃났?쒗궗 ???덈뒗 ???媛뺤젏? 臾댁뾿?멸??? 蹂댁쑀??湲곗닠, 寃쏀뿕, ?먯썝???ㅻ챸?댁＜?몄슂.</p>
            
            <div class="input-group">
                <textarea id="capability" maxlength="150" placeholder="?? ?곕━ ??..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="capabilityCount">0 / 150??/span>
                    <span id="capabilityStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">?뮕 ?덉떆</div>
                    AI/ML ?꾨Ц媛 3紐? ?꾩옄?곴굅???뚮옯??媛쒕컻 寃쏀뿕 5?? ?먯뿰??泥섎━ 紐⑤뜽 援ъ텞 寃쏀뿕. ?댁쟾 ?꾨줈?앺듃?먯꽌 10留??ъ슜??洹쒕え ?쒕퉬???댁쁺.
                </div>
            </div>
        </div>

        <!-- Question 4 -->
        <div class="form-card" data-step="4">
            <div class="question-number">04</div>
            <h2 class="question-title">?덈? ?먯튃</h2>
            <p class="question-desc">???쒗뭹 媛쒕컻?먯꽌 ?덈? ??묓븷 ???녿뒗 ?먯튃?대굹 媛移섎뒗 臾댁뾿?멸???</p>
            
            <div class="input-group">
                <textarea id="principle" maxlength="100" placeholder="?? ?ъ슜???꾨씪?대쾭?쒕뒗..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="principleCount">0 / 100??/span>
                    <span id="principleStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">?뮕 ?덉떆</div>
                    ?щ챸?깃낵 ?뺤쭅?? 紐⑤뱺 由щ럭???ㅼ젣 援щℓ?먮쭔 ?묒꽦 媛?ν븯硫? 議곗옉?대굹 媛吏?由щ럭???덈? ?덉슜?섏? ?딆뒿?덈떎.
                </div>
            </div>
        </div>

        <!-- Question 5 -->
        <div class="form-card" data-step="5">
            <div class="question-number">05</div>
            <h2 class="question-title">?깃났 ?뺤쓽</h2>
            <p class="question-desc">???쒗뭹???깃났?덈떎怨??먮떒?????덈뒗 湲곗?? 臾댁뾿?멸??? 援ъ껜?곸씤 吏?쒕굹 紐⑺몴瑜??쒖떆?댁＜?몄슂.</p>
            
            <div class="input-group">
                <textarea id="success" maxlength="100" placeholder="?? 6媛쒖썡 ??.."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="successCount">0 / 100??/span>
                    <span id="successStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">?뮕 ?덉떆</div>
                    6媛쒖썡 ???붽컙 ?쒖꽦 ?ъ슜??5留뚮챸, 由щ럭 ?좊ː???됯? 4.5/5 ?댁긽, 援щℓ ?꾪솚??湲곗〈 ?鍮?30% ?μ긽.
                </div>
            </div>
        </div>

        <!-- Question 6 -->
        <div class="form-card" data-step="6">
            <div class="question-number">06</div>
            <h2 class="question-title">?듭떖 湲곕뒫 ?꾩씠?붿뼱</h2>
            <p class="question-desc">??臾몄젣瑜??닿껐?섍린 ?꾪븳 ?듭떖 湲곕뒫?대굹 ?붾（???꾩씠?붿뼱瑜?媛꾨떒???ㅻ챸?댁＜?몄슂.</p>
            
            <div class="input-group">
                <textarea id="feature" maxlength="150" placeholder="?? AI 湲곕컲..."></textarea>
                <div class="char-counter">
                    <span class="char-count" id="featureCount">0 / 150??/span>
                    <span id="featureStatus"></span>
                </div>
                <div class="example-text">
                    <div class="example-label">?뮕 ?덉떆</div>
                    AI 湲곕컲 由щ럭 寃利??쒖뒪?? 援щℓ ?대젰 ?뺤씤, ?띿뒪??遺꾩꽍?쇰줈 媛吏?由щ럭 ?먯?, 寃利?諛곗? 遺?? ?ъ슜?먮뒗 ?좊ː???먯닔瑜??ㅼ떆媛??뺤씤 媛??
                </div>
            </div>
        </div>

        <!-- Completion Screen -->
        <div class="form-card completion-screen" id="completionScreen">
            <div class="completion-icon">??/div>
            <h2 class="completion-title">?낅젰 ?꾨즺!</h2>
            <p class="completion-desc">
                紐⑤뱺 ?뺣낫媛 ?깃났?곸쑝濡???λ릺?덉뒿?덈떎.<br>
                ?댁젣 ?꾨Ц?곸씤 BRD 臾몄꽌瑜??앹꽦??以鍮꾧? ?섏뿀?듬땲??
            </p>
            <button class="btn-primary" onclick="startBRDGeneration()">BRD ?앹꽦?섍린</button>
        </div>

        <!-- BRD ?앹꽦 ?붾㈃ -->
        <div class="form-card document-screen" id="brdScreen">
            <div class="document-header">
                <h2 class="document-title">Business Requirements Document</h2>
                <span class="document-badge badge-generating" id="brdBadge">?앹꽦 以?/span>
            </div>

            <!-- ?앹꽦 以??좊땲硫붿씠??-->
            <div class="generating-animation" id="brdGenerating">
                <div class="spinner"></div>
                <div class="generating-text">BRD瑜??앹꽦?섍퀬 ?덉뒿?덈떎...</div>
                <div class="generating-subtext">Claude AI媛 ?꾨줈?앺듃 ?곗씠?곕? 遺꾩꽍 以묒엯?덈떎</div>
            </div>

            <!-- ?먮윭 硫붿떆吏 -->
            <div class="error-message" id="brdError" style="display: none;">
                <h3>?좑툘 ?앹꽦 ?ㅻ쪟</h3>
                <p id="brdErrorText"></p>
                <button class="btn-primary" onclick="retryBRDGeneration()">?ㅼ떆 ?쒕룄</button>
            </div>

            <!-- ?앹꽦??臾몄꽌 ?댁슜 -->
            <div id="brdContentWrapper" style="display: none;">
                <div class="document-content" id="brdContent"></div>
                
                <div class="document-actions">
                    <button class="btn-success" onclick="approveBRD()">???뱀씤?섍퀬 PRD ?앹꽦</button>
                    <button class="btn-outline" onclick="regenerateBRD()">???ㅼ떆 ?앹꽦</button>
                    <button class="btn-outline" onclick="copyBRD()">?뱥 蹂듭궗</button>
                    <button class="btn-outline" onclick="exportBRDtoPDF()">?뱞 PDF ?대낫?닿린</button>
                </div>
            </div>
        </div>

        <!-- PRD ?앹꽦 ?붾㈃ -->
        <div class="form-card document-screen" id="prdScreen">
            <div class="document-header">
                <h2 class="document-title">Product Requirements Document</h2>
                <span class="document-badge badge-generating" id="prdBadge">?앹꽦 以?/span>
            </div>

            <div class="generating-animation" id="prdGenerating">
                <div class="spinner"></div>
                <div class="generating-text">PRD瑜??앹꽦?섍퀬 ?덉뒿?덈떎...</div>
                <div class="generating-subtext">BRD瑜?湲곕컲?쇰줈 ?곸꽭 ?붽뎄?ы빆???묒꽦 以묒엯?덈떎</div>
            </div>

            <div class="error-message" id="prdError" style="display: none;">
                <h3>?좑툘 ?앹꽦 ?ㅻ쪟</h3>
                <p id="prdErrorText"></p>
                <button class="btn-primary" onclick="retryPRDGeneration()">?ㅼ떆 ?쒕룄</button>
            </div>

            <div id="prdContentWrapper" style="display: none;">
                <div class="document-content" id="prdContent"></div>
                
                <div class="document-actions">
                    <button class="btn-success" onclick="approvePRD()">???뱀씤?섍퀬 TRD ?앹꽦</button>
                    <button class="btn-outline" onclick="regeneratePRD()">???ㅼ떆 ?앹꽦</button>
                    <button class="btn-outline" onclick="copyPRD()">?뱥 蹂듭궗</button>
                    <button class="btn-outline" onclick="exportPRDtoPDF()">?뱞 PDF ?대낫?닿린</button>
                    <button class="btn-outline" onclick="skipToComplete()">嫄대꼫?곌린</button>
                </div>
            </div>
        </div>

        <!-- TRD ?앹꽦 ?붾㈃ -->
        <div class="form-card document-screen" id="trdScreen">
            <div class="document-header">
                <h2 class="document-title">Technical Requirements Document</h2>
                <span class="document-badge badge-generating" id="trdBadge">?앹꽦 以?/span>
            </div>

            <div class="generating-animation" id="trdGenerating">
                <div class="spinner"></div>
                <div class="generating-text">TRD瑜??앹꽦?섍퀬 ?덉뒿?덈떎...</div>
                <div class="generating-subtext">湲곗닠 ?ㅽ럺怨??꾪궎?띿쿂瑜??ㅺ퀎 以묒엯?덈떎</div>
            </div>

            <div class="error-message" id="trdError" style="display: none;">
                <h3>?좑툘 ?앹꽦 ?ㅻ쪟</h3>
                <p id="trdErrorText"></p>
                <button class="btn-primary" onclick="retryTRDGeneration()">?ㅼ떆 ?쒕룄</button>
            </div>

            <div id="trdContentWrapper" style="display: none;">
                <div class="document-content" id="trdContent"></div>
                
                <div class="document-actions">
                    <button class="btn-success" onclick="completeProject()">???꾨줈?앺듃 ?꾨즺</button>
                    <button class="btn-outline" onclick="regenerateTRD()">???ㅼ떆 ?앹꽦</button>
                    <button class="btn-outline" onclick="copyTRD()">?뱥 蹂듭궗</button>
                    <button class="btn-outline" onclick="exportTRDtoPDF()">?뱞 PDF ?대낫?닿린</button>
                </div>
            </div>
        </div>

        <!-- 理쒖쥌 ?꾨즺 ?붾㈃ -->
        <div class="form-card completion-screen" id="finalCompletionScreen">
            <div class="completion-icon">?럦</div>
            <h2 class="completion-title">紐⑤뱺 臾몄꽌 ?앹꽦 ?꾨즺!</h2>
            <p class="completion-desc">
                BRD, PRD, TRD媛 ?깃났?곸쑝濡??앹꽦?섏뿀?듬땲??<br>
                紐⑤뱺 臾몄꽌瑜??ㅼ슫濡쒕뱶?섍굅?????꾨줈?앺듃瑜??쒖옉?????덉뒿?덈떎.
            </p>
            <div class="document-actions" style="justify-content: center;">
                <button class="btn-primary" onclick="downloadAllDocuments()">?벀 紐⑤뱺 臾몄꽌 ?ㅼ슫濡쒕뱶</button>
                <button class="btn-outline" onclick="startNewProject()">?봽 ???꾨줈?앺듃 ?쒖옉</button>
            </div>
        </div>

        <div class="button-group" id="navigationButtons">
            <button class="btn-secondary" id="prevBtn" onclick="prevStep()" style="display: none;">?댁쟾</button>
            <button class="btn-primary" id="nextBtn" onclick="nextStep()" disabled>?ㅼ쓬</button>
        </div>

        <div class="auto-save-indicator" id="autoSaveIndicator">
            ?뮶 ?먮룞 ??λ맖
        </div>
    </div>

    <script>
        // UUID ?앹꽦 ?⑥닔
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0;
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // ?꾨줈?앺듃 ?곗씠??援ъ“
        class ProjectData {
            constructor() {
                this.id = generateUUID();
                this.created_at = new Date().toISOString();
                this.updated_at = new Date().toISOString();
                this.status = 'input';
                
                this.user_input = {
                    insight: '',
                    evidence: '',
                    capability: '',
                    principle: '',
                    success_metric: '',
                    core_features: ''
                };
                
                this.documents = {
                    brd: {
                        content: '',
                        status: 'pending',
                        generated_at: null,
                        version: 0
                    },
                    prd: {
                        content: '',
                        status: 'pending',
                        generated_at: null,
                        version: 0
                    },
                    trd: {
                        content: '',
                        status: 'pending',
                        generated_at: null,
                        version: 0
                    }
                };
                
                this.structured_data = {
                    personas: [],
                    features: [],
                    metrics: [],
                    technical_specs: []
                };

                this.history = [];
            }

            // ?곗씠???낅뜲?댄듃
            updateUserInput(field, value) {
                this.user_input[field] = value;
                this.updated_at = new Date().toISOString();
                this.addHistory('user_input_updated', { field, value });
                this.save();
            }

            // ?곹깭 蹂寃?            updateStatus(newStatus) {
                const oldStatus = this.status;
                this.status = newStatus;
                this.updated_at = new Date().toISOString();
                this.addHistory('status_changed', { from: oldStatus, to: newStatus });
                this.save();
            }

            // 臾몄꽌 ?앹꽦 ?쒖옉
            startDocumentGeneration(docType) {
                this.documents[docType].status = 'generating';
                this.updated_at = new Date().toISOString();
                this.addHistory('document_generation_started', { type: docType });
                this.save();
            }

            // 臾몄꽌 ?앹꽦 ?꾨즺
            completeDocumentGeneration(docType, content) {
                this.documents[docType].content = content;
                this.documents[docType].status = 'generated';
                this.documents[docType].generated_at = new Date().toISOString();
                this.documents[docType].version++;
                this.updated_at = new Date().toISOString();
                this.addHistory('document_generated', { type: docType, version: this.documents[docType].version });
                this.save();
            }

            // 臾몄꽌 ?뱀씤
            approveDocument(docType) {
                this.documents[docType].status = 'approved';
                this.updated_at = new Date().toISOString();
                this.addHistory('document_approved', { type: docType });
                this.save();
            }

            // 援ъ“?붾맂 ?곗씠??異붽?
            addStructuredData(category, data) {
                this.structured_data[category].push({
                    id: generateUUID(),
                    ...data,
                    created_at: new Date().toISOString()
                });
                this.updated_at = new Date().toISOString();
                this.addHistory('structured_data_added', { category, data });
                this.save();
            }

            // ?덉뒪?좊━ 異붽?
            addHistory(action, details) {
                this.history.push({
                    timestamp: new Date().toISOString(),
                    action,
                    details
                });
            }

            // 濡쒖뺄 ?ㅽ넗由ъ??????            save() {
                try {
                    localStorage.setItem('projectData', JSON.stringify(this));
                    localStorage.setItem('projectData_backup_' + Date.now(), JSON.stringify(this));
                    console.log('???꾨줈?앺듃 ?곗씠??????꾨즺:', this.id);
                    return true;
                } catch (e) {
                    console.error('??????ㅽ뙣:', e);
                    return false;
                }
            }

            // 濡쒖뺄 ?ㅽ넗由ъ??먯꽌 遺덈윭?ㅺ린
            static load() {
                try {
                    const saved = localStorage.getItem('projectData');
                    if (saved) {
                        const data = JSON.parse(saved);
                        const project = new ProjectData();
                        Object.assign(project, data);
                        console.log('???꾨줈?앺듃 ?곗씠??濡쒕뱶 ?꾨즺:', project.id);
                        return project;
                    }
                } catch (e) {
                    console.error('??濡쒕뱶 ?ㅽ뙣:', e);
                }
                return new ProjectData();
            }

            // 吏꾪뻾瑜?怨꾩궛
            getProgress() {
                const fields = Object.values(this.user_input);
                const completed = fields.filter(v => v && v.trim().length > 0).length;
                return {
                    completed,
                    total: fields.length,
                    percentage: Math.round((completed / fields.length) * 100)
                };
            }

            // ?낅젰 ?꾨즺 ?щ? ?뺤씤
            isInputComplete() {
                return Object.values(this.user_input).every(v => v && v.trim().length > 0);
            }

            // ?곗씠???대낫?닿린 (JSON)
            exportJSON() {
                return JSON.stringify(this, null, 2);
            }

            // ?곗씠???붿빟
            getSummary() {
                const progress = this.getProgress();
                return {
                    id: this.id,
                    created: new Date(this.created_at).toLocaleString('ko-KR'),
                    updated: new Date(this.updated_at).toLocaleString('ko-KR'),
                    status: this.status,
                    progress: `${progress.completed}/${progress.total} (${progress.percentage}%)`,
                    documents: {
                        brd: this.documents.brd.status,
                        prd: this.documents.prd.status,
                        trd: this.documents.trd.status
                    }
                };
            }
        }

        // ?꾩뿭 ?꾨줈?앺듃 ?몄뒪?댁뒪
        let projectData = ProjectData.load();

        // ?곹깭 愿由?        let currentStep = 1;
        const totalSteps = 6;
        
        // ?꾨뱶 留ㅽ븨 (?붾㈃ ID -> ?곗씠??援ъ“)
        const fieldMapping = {
            insight: 'insight',
            validation: 'evidence',
            capability: 'capability',
            principle: 'principle',
            success: 'success_metric',
            feature: 'core_features'
        };

        // 濡쒖뺄 ?ㅽ넗由ъ??먯꽌 ?곗씠??遺덈윭?ㅺ린
        function loadSavedData() {
            // ?꾨줈?앺듃 ?곗씠?곗뿉???ъ슜???낅젰 遺덈윭?ㅺ린
            Object.keys(fieldMapping).forEach(fieldId => {
                const dataKey = fieldMapping[fieldId];
                const element = document.getElementById(fieldId);
                if (element && projectData.user_input[dataKey]) {
                    element.value = projectData.user_input[dataKey];
                    updateCharCount(fieldId);
                }
            });

            console.log('?뱤 ?꾨줈?앺듃 ?붿빟:', projectData.getSummary());
        }

        // ?먮룞 ???        function autoSave() {
            const saved = projectData.save();
            if (saved) {
                showAutoSaveIndicator();
            }
        }

        function showAutoSaveIndicator() {
            const indicator = document.getElementById('autoSaveIndicator');
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }

        // 湲?먯닔 移댁슫???낅뜲?댄듃
        function updateCharCount(fieldId) {
            console.log('?? updateCharCount ?쒖옉:', fieldId);
            
            const textarea = document.getElementById(fieldId);
            const counter = document.getElementById(fieldId + 'Count');
            const status = document.getElementById(fieldId + 'Status');
            
            if (!textarea) {
                console.error('??textarea瑜?李얠쓣 ???놁뒿?덈떎:', fieldId);
                return;
            }
            
            const maxLength = textarea.maxLength;
            const currentLength = textarea.value.length;
            
            console.log('?뵇 updateCharCount ?붾쾭源?', {
                fieldId,
                currentLength,
                maxLength,
                currentStep,
                textareaValue: textarea.value
            });
            
            if (counter) {
                counter.textContent = `${currentLength} / ${maxLength}??;
                
                if (currentLength > maxLength * 0.9) {
                    counter.classList.add('warning');
                } else {
                    counter.classList.remove('warning');
                }
            }

            // ?좏슚??寃??            if (status) {
                if (currentLength > 0) {
                    status.textContent = '??;
                    status.style.color = '#a89075';
                    textarea.classList.remove('error');
                } else {
                    status.textContent = '';
                    textarea.classList.add('error');
                }
            }

            // ?꾨줈?앺듃 ?곗씠?곗뿉 ???            const dataKey = fieldMapping[fieldId];
            if (dataKey) {
                projectData.updateUserInput(dataKey, textarea.value);
            }

            // ?ㅼ쓬 踰꾪듉 ?쒖꽦??鍮꾪솢?깊솕
            console.log('?봽 updateNextButton ?몄텧');
            updateNextButton();
        }

        // ?ㅼ쓬 踰꾪듉 ?곹깭 ?낅뜲?댄듃
        function updateNextButton() {
            console.log('?? updateNextButton ?쒖옉');
            
            const nextBtn = document.getElementById('nextBtn');
            const currentFieldId = getCurrentFieldId();
            const textarea = document.getElementById(currentFieldId);
            const currentValue = textarea ? textarea.value : '';
            
            console.log('?뵇 updateNextButton ?붾쾭源?', {
                currentStep,
                currentFieldId,
                textarea: !!textarea,
                currentValue: currentValue,
                trimmedLength: currentValue.trim().length,
                nextBtn: !!nextBtn,
                nextBtnDisabled: nextBtn ? nextBtn.disabled : 'N/A',
                nextBtnText: nextBtn ? nextBtn.textContent : 'N/A'
            });
            
            if (!nextBtn) {
                console.error('??nextBtn ?붿냼瑜?李얠쓣 ???놁뒿?덈떎');
                return;
            }
            
            if (!textarea) {
                console.error('??textarea ?붿냼瑜?李얠쓣 ???놁뒿?덈떎:', currentFieldId);
                return;
            }
            
            const hasContent = currentValue && currentValue.trim().length > 0;
            console.log('?뱷 ?댁슜 ?뺤씤:', {
                hasContent,
                value: currentValue,
                trimmed: currentValue.trim(),
                length: currentValue.trim().length
            });
            
            if (hasContent) {
                nextBtn.disabled = false;
                nextBtn.classList.remove('btn-primary:disabled');
                console.log('???ㅼ쓬 踰꾪듉 ?쒖꽦??- disabled:', nextBtn.disabled);
            } else {
                nextBtn.disabled = true;
                nextBtn.classList.add('btn-primary:disabled');
                console.log('???ㅼ쓬 踰꾪듉 鍮꾪솢?깊솕 - disabled:', nextBtn.disabled);
            }
        }

        // ?꾩옱 ?꾨뱶 ID 媛?몄삤湲?        function getCurrentFieldId() {
            const fields = ['insight', 'validation', 'capability', 'principle', 'success', 'feature'];
            const fieldId = fields[currentStep - 1];
            console.log('?뵇 getCurrentFieldId:', {
                currentStep,
                fields,
                fieldId,
                arrayLength: fields.length
            });
            return fieldId;
        }

        // 吏꾪뻾瑜??낅뜲?댄듃
        function updateProgress() {
            const progress = projectData.getProgress();
            const displayProgress = ((currentStep - 1) / totalSteps) * 100;
            
            document.getElementById('progressFill').style.width = displayProgress + '%';
            document.getElementById('progressText').textContent = `吏덈Ц ${currentStep} / ${totalSteps}`;
            document.getElementById('progressPercent').textContent = `${progress.percentage}% ?꾨즺`;
        }

        // ?ㅼ쓬 ?④퀎
        function nextStep() {
            if (currentStep < totalSteps) {
                // ?꾩옱 移대뱶 ?④린湲?                document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.remove('active');
                
                currentStep++;
                
                // ?ㅼ쓬 移대뱶 蹂댁씠湲?                document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.add('active');
                
                updateProgress();
                updateNextButton();
                
                // 踰꾪듉 ?쒖떆 議곗젙
                document.getElementById('prevBtn').style.display = 'block';
                
                if (currentStep === totalSteps) {
                    document.getElementById('nextBtn').textContent = '?꾨즺';
                }
                
                // ?ㅽ겕濡?留??꾨줈
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                showCompletion();
            }
        }

        // ?댁쟾 ?④퀎
        function prevStep() {
            if (currentStep > 1) {
                document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.remove('active');
                
                currentStep--;
                
                document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.add('active');
                
                updateProgress();
                updateNextButton();
                
                if (currentStep === 1) {
                    document.getElementById('prevBtn').style.display = 'none';
                }
                
                document.getElementById('nextBtn').textContent = '?ㅼ쓬';
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // ?꾨즺 ?붾㈃ ?쒖떆
        function showCompletion() {
            document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.remove('active');
            document.getElementById('completionScreen').classList.add('active');
            document.getElementById('navigationButtons').style.display = 'none';
            
            // ?곹깭 ?낅뜲?댄듃
            projectData.updateStatus('input_completed');
            
            // 吏꾪뻾瑜?100%
            document.getElementById('progressFill').style.width = '100%';
            document.getElementById('progressText').textContent = '?꾨즺!';
            document.getElementById('progressPercent').textContent = '100% ?꾨즺';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });

            console.log('?럦 ?낅젰 ?꾨즺! ?꾨줈?앺듃 ?곗씠??', projectData.getSummary());
        }

        // 臾몄꽌 ?앹꽦 (?ㅼ쓬 ?④퀎濡??곌껐???⑥닔)
        function generateDocuments() {
            startBRDGeneration();
        }

        // ?뚰겕?뚮줈???곹깭 ?낅뜲?댄듃
        function updateWorkflowStatus(currentStage) {
            const stages = ['input', 'brd', 'prd', 'trd'];
            const stageElements = document.querySelectorAll('.workflow-step');
            
            stages.forEach((stage, index) => {
                const element = document.querySelector(`.workflow-step[data-step="${stage}"]`);
                
                if (stage === currentStage) {
                    element.classList.add('active');
                    element.classList.remove('completed');
                } else if (stages.indexOf(currentStage) > index) {
                    element.classList.add('completed');
                    element.classList.remove('active');
                } else {
                    element.classList.remove('active', 'completed');
                }
            });
        }

        // BRD ?앹꽦 ?쒖옉
        async function startBRDGeneration() {
            // ?붾㈃ ?꾪솚
            document.getElementById('completionScreen').classList.remove('active');
            document.getElementById('brdScreen').classList.add('active');
            document.getElementById('navigationButtons').style.display = 'none';
            
            // ?곹깭 ?낅뜲?댄듃
            projectData.updateStatus('brd_generating');
            projectData.startDocumentGeneration('brd');
            updateWorkflowStatus('brd');
            
            // ?앹꽦 ?쒖옉
            await generateBRD();
        }

        // BRD ?앹꽦 API ?몄텧 (AI ?꾨＼?꾪듃 湲곕컲)
        async function generateBRD() {
            try {
                // AI ?꾨＼?꾪듃 ?앹꽦
                const prompt = createBRDPrompt();
                
                // ?ㅼ젣 AI API ?몄텧 (?꾩옱???곕え 紐⑤뱶)
                const brdContent = await callAIAPI(prompt, 'BRD');

                // BRD ???諛??쒖떆
                projectData.completeDocumentGeneration('brd', brdContent);
                displayBRD(brdContent);

            } catch (error) {
                console.error('BRD ?앹꽦 ?ㅻ쪟:', error);
                showBRDError(error.message);
            }
        }

        // BRD ?꾨＼?꾪듃 ?앹꽦
        function createBRDPrompt() {
            const input = projectData.user_input;
            return `?뱀떊? ?쒗뭹 ?꾨왂 諛?鍮꾩쫰?덉뒪 遺꾩꽍 ?꾨Ц媛?낅땲?? ?ㅼ쓬 ?뺣낫瑜?諛뷀깢?쇰줈 ?꾨Ц?곸씤 Business Requirements Document(BRD)瑜??묒꽦?댁＜?몄슂.

**?ъ슜???낅젰 ?곗씠??**

**?듭떖 ?몄궗?댄듃:**
${input.insight}

**寃利?洹쇨굅:**
${input.evidence}

**? ??웾:**
${input.capability}

**?덈? ?먯튃:**
${input.principle}

**?깃났 ?뺤쓽:**
${input.success_metric}

**?듭떖 湲곕뒫 ?꾩씠?붿뼱:**
${input.core_features}

---

**BRD ?묒꽦 媛?대뱶?쇱씤:**

?ㅼ쓬 援ъ“濡??꾨Ц?곸씠怨??곸꽭??BRD瑜??묒꽦?댁＜?몄슂:

## 1. Executive Summary
- ?꾨줈?앺듃 媛쒖슂 (2-3 臾몃떒)
- ?듭떖 鍮꾩쫰?덉뒪 媛移?- ?덉긽 ROI 諛??곹뼢

## 2. Business Objectives
- 援ъ껜?곸씤 鍮꾩쫰?덉뒪 紐⑺몴 (3-5媛?
- 媛?紐⑺몴??痢≪젙 媛?ν븳 吏??- 紐⑺몴 ?ъ꽦 ??꾨씪??
## 3. Market Analysis
- ?쒖옣 湲고쉶 遺꾩꽍
- ?寃?怨좉컼 ?섎Ⅴ?뚮굹
- 寃쎌웳??遺꾩꽍

## 4. Problem Statement
- ?닿껐?섎젮???듭떖 臾몄젣
- 臾몄젣??鍮꾩쫰?덉뒪 ?곹뼢
- ?꾩옱 ?곹솴 (As-Is)

## 5. Proposed Solution
- ?붾（??媛쒖슂
- ?듭떖 湲곕뒫 諛?媛移??쒖븞
- 湲곕??섎뒗 寃곌낵 (To-Be)

## 6. Success Criteria
- ?뺣웾??KPI (3-5媛?
- ?뺤꽦???깃났 吏??- 痢≪젙 諛⑸쾿

## 7. Stakeholders
- 二쇱슂 ?댄빐愿怨꾩옄
- 媛??댄빐愿怨꾩옄????븷
- ?섏궗寃곗젙 ?꾨줈?몄뒪

## 8. Constraints & Risks
- ?쒖빟 ?ы빆 (?쒓컙, ?덉궛, 湲곗닠, 由ъ냼??
- 二쇱슂 由ъ뒪??諛??꾪솕 諛⑹븞
- ?섏〈??
## 9. Timeline & Milestones
- 二쇱슂 留덉씪?ㅽ넠
- ?④퀎蹂??쇱젙
- 異쒖떆 怨꾪쉷

## 10. Budget & Resources
- ?덉궛 異붿젙
- ?꾩슂 由ъ냼??- ?ъ옄 ?鍮?湲곕? ?④낵

**以묒슂:**
- 媛??뱀뀡? 援ъ껜?곸씠怨??ㅽ뻾 媛?ν빐???⑸땲??- 鍮꾩쫰?덉뒪 媛移섏? ROI瑜?紐낇솗???쒖떆?섏꽭??- ?곗씠??湲곕컲???섏궗寃곗젙??媛뺤“?섏꽭??- ?꾨Ц?곸씠怨??ㅻ뱷???덈뒗 臾몄껜瑜??ъ슜?섏꽭??- 留덊겕?ㅼ슫 ?뺤떇?쇰줈 ?묒꽦?섏꽭??;
        }

        // AI API ?몄텧 ?⑥닔 (?꾩옱???곕え 紐⑤뱶)
        async function callAIAPI(prompt, docType) {
            try {
                // ?ㅼ젣 AI API ?몄텧 (Claude API ?덉떆)
                /*
                const response = await fetch("https://api.anthropic.com/v1/messages", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "x-api-key": "YOUR_API_KEY"
                    },
                    body: JSON.stringify({
                        model: "claude-3-5-sonnet-20241022",
                        max_tokens: 4000,
                        messages: [{ role: "user", content: prompt }]
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`API ?ㅻ쪟: ${response.status}`);
                }
                
                const data = await response.json();
                return data.content[0].text;
                */
                
                // ?곕え 紐⑤뱶: ?꾨＼?꾪듃 湲곕컲 ?쒕??덉씠??                console.log(`?쨼 ${docType} AI ?꾨＼?꾪듃 ?앹꽦??`, prompt.substring(0, 200) + '...');
                
                // 3珥??湲?(濡쒕뵫 ?④낵)
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // ?곕え ?묐떟 ?앹꽦
                return generateDemoResponse(docType, prompt);
                
            } catch (error) {
                console.error(`${docType} AI API ?몄텧 ?ㅻ쪟:`, error);
                throw error;
            }
        }

        // AI 遺꾩꽍 ?쒕??덉씠???ы띁 ?⑥닔??        function generateUserPersonas(input) {
            const personas = [
                {
                    name: '二쇰땲??留ㅻ땲?',
                    age: '25-35??,
                    role: '以묎컙 愿由ъ옄',
                    pain: '?곗씠??遺꾩꽍 ?쒓컙 遺議?,
                    goal: '?⑥쑉?곸씤 ?섏궗寃곗젙'
                },
                {
                    name: '?쒕땲???꾩썝',
                    age: '40-50??,
                    role: '寃쎌쁺吏?,
                    pain: '?꾨왂???몄궗?댄듃 遺議?,
                    goal: '鍮꾩쫰?덉뒪 ?깃낵 ?μ긽'
                },
                {
                    name: '媛쒕컻??,
                    age: '25-40??,
                    role: '湲곗닠吏?,
                    pain: '蹂듭옟???꾧뎄 ?ъ슜',
                    goal: '媛꾪렪???곗씠??泥섎━'
                }
            ];
            
            const selectedPersonas = personas.slice(0, Math.floor(Math.random() * 2) + 2);
            
            return `**二쇱슂 ?섎Ⅴ?뚮굹:**
${selectedPersonas.map((persona, index) => `
**${persona.name} (${persona.age})**
- **??븷**: ${persona.role}
- **?섏씤 ?ъ씤??*: ${persona.pain}
- **紐⑺몴**: ${persona.goal}
- **?ъ슜 ?쒕굹由ъ삤**: ${input.insight ? `"${input.insight}"` : '?듭떖 臾몄젣'} ?닿껐???꾪빐 ${input.core_features ? `"${input.core_features}"` : '?듭떖 湲곕뒫'} ?쒖슜
- **湲곕? ?④낵**: ?묒뾽 ?⑥쑉??${Math.floor(Math.random() * 30) + 20}% ?μ긽
`).join('')}

**怨듯넻 ?덉쫰:**
- 吏곴??곸씤 ?ъ슜???명꽣?섏씠??- 鍮좊Ⅸ ?곗씠??泥섎━ 諛?遺꾩꽍
- 紐⑤컮???묎렐??- ?ㅼ떆媛??묒뾽 湲곕뒫`;
        }

        function generateFeatureAnalysis(input) {
            const features = [
                { name: '?듭떖 湲곕뒫', priority: 'P0', effort: 'High', impact: 'High' },
                { name: '?ъ슜???몄쬆', priority: 'P0', effort: 'Medium', impact: 'High' },
                { name: '?곗씠???쒓컖??, priority: 'P1', effort: 'High', impact: 'Medium' },
                { name: '?뚮┝ ?쒖뒪??, priority: 'P1', effort: 'Medium', impact: 'Medium' },
                { name: '蹂닿퀬???앹꽦', priority: 'P2', effort: 'Low', impact: 'Low' }
            ];
            
            return `**湲곕뒫 ?붽뎄?ы빆 遺꾩꽍:**
${features.map(feature => `
**${feature.name}**
- **?곗꽑?쒖쐞**: ${feature.priority}
- **媛쒕컻 怨듭닔**: ${feature.effort}
- **鍮꾩쫰?덉뒪 ?꾪뙥??*: ${feature.impact}
- **?ъ슜???ㅽ넗由?*: ${input.insight ? `"${input.insight}"` : '?듭떖 臾몄젣'} ?닿껐???꾪빐 ${feature.name} 湲곕뒫???꾩슂
- **?몄닔 湲곗?**: 湲곕뒫蹂?援ъ껜??寃利?議곌굔
- **?섏〈??*: ${feature.priority === 'P0' ? '?놁쓬' : '?듭떖 湲곕뒫 ?꾨즺 ??}
`).join('')}

**湲곕뒫 ?곗꽑?쒖쐞 留ㅽ듃由?뒪:**
- **P0 (Must Have)**: ?듭떖 湲곕뒫, ?ъ슜???몄쬆
- **P1 (Should Have)**: ?곗씠???쒓컖?? ?뚮┝ ?쒖뒪?? 
- **P2 (Could Have)**: 蹂닿퀬???앹꽦, 怨좉툒 遺꾩꽍

**湲곗닠??蹂듭옟??**
- **High**: AI/ML 湲곕컲 遺꾩꽍 湲곕뒫
- **Medium**: ?ㅼ떆媛??곗씠??泥섎━
- **Low**: 湲곕낯 CRUD 湲곕뒫`;
        }

        function generateUserStories(input) {
            const epics = [
                {
                    name: '?ъ슜???몄쬆',
                    stories: [
                        '?뚯뀥 濡쒓렇?몄쑝濡?媛꾪렪 媛??,
                        '?대찓???몄쬆?쇰줈 怨꾩젙 蹂댁븞',
                        '沅뚰븳蹂??묎렐 ?쒖뼱'
                    ]
                },
                {
                    name: '?곗씠??遺꾩꽍',
                    stories: [
                        '?ㅼ떆媛??곗씠???쒓컖??,
                        '而ㅼ뒪? ??쒕낫???앹꽦',
                        '?먮룞 ?몄궗?댄듃 異붿쿇'
                    ]
                },
                {
                    name: '?묒뾽 湲곕뒫',
                    stories: [
                        '??먭낵 ?곗씠??怨듭쑀',
                        '?ㅼ떆媛??볤? 諛??쇰뱶諛?,
                        '踰꾩쟾 愿由?諛??덉뒪?좊━'
                    ]
                }
            ];
            
            return `**Epic蹂??ъ슜???ㅽ넗由?**
${epics.map(epic => `
**${epic.name} Epic:**
${epic.stories.map((story, index) => `
- **Story ${index + 1}**: ${story}
  - ?ㅽ넗由??ъ씤?? ${Math.floor(Math.random() * 5) + 3}
  - Definition of Done: 湲곕뒫 援ы쁽, ?뚯뒪???꾨즺, 臾몄꽌??`).join('')}
`).join('')}

**?꾩껜 ?ㅽ넗由??ъ씤??*: ${Math.floor(Math.random() * 50) + 100} ?ъ씤??**?덉긽 媛쒕컻 湲곌컙**: ${Math.floor(Math.random() * 6) + 3}媛쒖썡
**? 援ъ꽦**: 媛쒕컻??3紐? ?붿옄?대꼫 1紐? PM 1紐?;
        }

        function generateSystemArchitecture(input) {
            const architecture = [
                '留덉씠?щ줈?쒕퉬???꾪궎?띿쿂',
                '?대깽??湲곕컲 ?꾪궎?띿쿂',
                'CQRS ?⑦꽩',
                '?꾨찓??二쇰룄 ?ㅺ퀎'
            ];
            
            const selectedArch = architecture[Math.floor(Math.random() * architecture.length)];
            
            return `**?꾩껜 ?쒖뒪???꾪궎?띿쿂:**
- **?꾪궎?띿쿂 ?⑦꽩**: ${selectedArch}
- **?듭떊 諛⑹떇**: REST API + Message Queue
- **?곗씠???먮쫫**: Event Sourcing + CQRS
- **?쒕퉬??遺꾨━**: ?꾨찓?몃퀎 留덉씠?щ줈?쒕퉬??
**二쇱슂 而댄룷?뚰듃:**
- **API Gateway**: Kong 湲곕컲 ?쇱슦??諛??몄쬆
- **?몄쬆 ?쒕퉬??*: OAuth 2.0 + JWT ?좏겙 愿由?- **鍮꾩쫰?덉뒪 ?쒕퉬??*: ${input.core_features ? `"${input.core_features}"` : '?듭떖 湲곕뒫'} 泥섎━
- **遺꾩꽍 ?쒕퉬??*: ?ㅼ떆媛??곗씠??泥섎━ 諛?ML 紐⑤뜽
- **?뚮┝ ?쒕퉬??*: ?대찓?? SMS, ?몄떆 ?뚮┝

**?곗씠???뚮줈??**
1. **?섏쭛**: ?ъ슜???붿껌 ??API Gateway ???몄쬆 ?쒕퉬??2. **泥섎━**: 鍮꾩쫰?덉뒪 ?쒕퉬?????곗씠?곕쿋?댁뒪 ??罹먯떆
3. **遺꾩꽍**: 遺꾩꽍 ?쒕퉬????ML 紐⑤뜽 ???몄궗?댄듃 ?앹꽦
4. **?뚮┝**: 寃곌낵 ???뚮┝ ?쒕퉬?????ъ슜???꾨떖

**?명봽??援ъ꽦:**
- **濡쒕뱶 諛몃윴??*: Nginx + HAProxy
- **而⑦뀒?대꼫**: Docker + Kubernetes
- **紐⑤땲?곕쭅**: Prometheus + Grafana + ELK Stack
- **濡쒓렇**: Fluentd + Elasticsearch + Kibana`;
        }

        function generateTechnologyStack(input) {
            const techStacks = [
                {
                    frontend: ['React.js', 'TypeScript', 'Material-UI', 'Redux'],
                    backend: ['Node.js', 'Express', 'TypeScript', 'NestJS'],
                    database: ['PostgreSQL', 'Redis', 'MongoDB'],
                    infrastructure: ['AWS', 'Docker', 'Kubernetes', 'Terraform']
                },
                {
                    frontend: ['Vue.js', 'TypeScript', 'Vuetify', 'Vuex'],
                    backend: ['Python', 'FastAPI', 'Django', 'Celery'],
                    database: ['PostgreSQL', 'Redis', 'Elasticsearch'],
                    infrastructure: ['GCP', 'Docker', 'Kubernetes', 'Helm']
                },
                {
                    frontend: ['Angular', 'TypeScript', 'Angular Material', 'NgRx'],
                    backend: ['Java', 'Spring Boot', 'Spring Security', 'Kafka'],
                    database: ['MySQL', 'Redis', 'Cassandra'],
                    infrastructure: ['Azure', 'Docker', 'AKS', 'ARM Templates']
                }
            ];
            
            const selectedStack = techStacks[Math.floor(Math.random() * techStacks.length)];
            
            return `**湲곗닠 ?ㅽ깮 ?좏깮 湲곗?:**
${input.capability ? `- ? ??웾: ${input.capability}` : '- ? ??웾 湲곕컲 湲곗닠 ?좏깮'}
- **?깅뒫**: 怨좎꽦??諛??뺤옣??怨좊젮
- **?좎?蹂댁닔??*: ?κ린???좎?蹂댁닔 ?⑹씠??- **?앺깭怨?*: ?쒕컻??而ㅻ??덊떚 諛?臾몄꽌??- **?숈뒿 怨≪꽑**: ? ?숈뒿 鍮꾩슜 理쒖냼??
**?좏깮??湲곗닠 ?ㅽ깮:**
- **Frontend**: ${selectedStack.frontend.join(', ')}
- **Backend**: ${selectedStack.backend.join(', ')}
- **Database**: ${selectedStack.database.join(', ')}
- **Infrastructure**: ${selectedStack.infrastructure.join(', ')}

**湲곗닠 ?좏깮 ?댁쑀:**
- **Frontend**: 而댄룷?뚰듃 湲곕컲 ?ъ궗?⑹꽦, ????덉젙??- **Backend**: ${input.insight ? `"${input.insight}"` : '?듭떖 臾몄젣'} ?닿껐??理쒖쟻?붾맂 ?꾨젅?꾩썙??- **Database**: ACID ?뱀꽦怨?NoSQL ?μ젏 寃고빀
- **Infrastructure**: ?대씪?곕뱶 ?ㅼ씠?곕툕 ?ㅺ퀎 ?먯튃

**???湲곗닠:**
- **Frontend ???*: Svelte, Solid.js (?깅뒫 ?곗꽑)
- **Backend ???*: Go, Rust (怨좎꽦???붽뎄?ы빆)
- **Database ???*: ClickHouse (遺꾩꽍 ?뱁솕), TimescaleDB (?쒓퀎??
- **Infrastructure ???*: Serverless (Lambda, Cloud Functions)`;
        }

        function generateDataArchitecture(input) {
            const dataVolume = Math.floor(Math.random() * 1000) + 100; // 100-1100TB
            const userCount = Math.floor(Math.random() * 100000) + 10000; // 1留?11留뚮챸
            
            return `**?곗씠?곕쿋?댁뒪 ?ㅺ퀎:**
- **二??곗씠?곕쿋?댁뒪**: PostgreSQL (ACID ?몃옖??뀡)
- **罹먯떆**: Redis (?몄뀡, ?꾩떆 ?곗씠??
- **遺꾩꽍 DB**: ClickHouse (??⑸웾 遺꾩꽍)
- **寃??*: Elasticsearch (?꾨Ц 寃??

**?곗씠??紐⑤뜽留?**
- **?ъ슜???곗씠??*: ?꾨줈?? 沅뚰븳, ?ㅼ젙 (?뺢퇋??
- **鍮꾩쫰?덉뒪 ?곗씠??*: ${input.core_features ? `"${input.core_features}"` : '?듭떖 湲곕뒫'} 愿??(?뺢퇋??
- **遺꾩꽍 ?곗씠??*: ?대깽?? 濡쒓렇, 硫뷀듃由?(鍮꾩젙洹쒗솕)
- **?쒖뒪???곗씠??*: 媛먯궗, 諛깆뾽, 硫뷀??곗씠??
**?곗씠???뚮줈??**
1. **?섏쭛**: API ??寃利????뺢퇋???????2. **泥섎━**: ETL ?뚯씠?꾨씪????蹂????吏묎퀎
3. **遺꾩꽍**: ML ?뚯씠?꾨씪????紐⑤뜽 ?숈뒿 ???덉륫
4. **?쒓컖??*: ??쒕낫?????ㅼ떆媛?李⑦듃 ???뚮┝

**?깅뒫 理쒖쟻??**
- **?몃뜳??*: 蹂듯빀 ?몃뜳?? 遺遺??몃뜳???쒖슜
- **?뚰떚?붾떇**: ?좎쭨蹂? 吏??퀎 ?섑룊 遺꾪븷
- **?ㅻ뵫**: ?ъ슜??ID 湲곕컲 ?섑룊 遺꾪븷
- **罹먯떛**: Redis ?대윭?ㅽ꽣 湲곕컲 ?ㅼ링 罹먯떛

**?곗씠??蹂댁븞:**
- **?뷀샇??*: AES-256 而щ읆 ?덈꺼 ?뷀샇??- **?묎렐 ?쒖뼱**: RBAC 湲곕컲 ?몃???沅뚰븳 愿由?- **媛먯궗**: 紐⑤뱺 ?곗씠??蹂寃??대젰 異붿쟻
- **諛깆뾽**: ?쇱씪 ?꾩껜 + ?ㅼ떆媛?利앸텇 諛깆뾽

**?덉긽 ?곗씠??洹쒕え:**
- **珥??곗씠?곕웾**: ${dataVolume}TB (3???덉긽)
- **?ъ슜????*: ${userCount}紐?- **?쇱씪 ?몃옖??뀡**: ${Math.floor(Math.random() * 1000000) + 100000}嫄?- **?곗씠??利앷???*: ??${Math.floor(Math.random() * 20) + 10}%`;
        }

        function generateSecurityFramework(input) {
            const securityLevel = ['High', 'Medium', 'Low'][Math.floor(Math.random() * 3)];
            
            return `**蹂댁븞 ?붽뎄?ы빆:**
${input.principle ? `- ${input.principle} 以?? : '- ?ъ슜???뺤쓽 蹂댁븞 ?먯튃'}
- **蹂댁븞 ?깃툒**: ${securityLevel} (?낃퀎 ?쒖?)
- **洹쒖젙 以??*: GDPR, 媛쒖씤?뺣낫蹂댄샇踰? ISO 27001
- **?곗씠??遺꾨쪟**: 怨듦컻, ?대?, 湲곕?, 洹밸퉬

**?몄쬆 諛?沅뚰븳:**
- **?ㅼ쨷 ?몄쬆**: MFA (SMS, TOTP, ?앹껜?몄쬆)
- **OAuth 2.0**: ?뚯뀥 濡쒓렇??(Google, GitHub, Microsoft)
- **JWT ?좏겙**: ?≪꽭???좏겙 (15遺? + 由ы봽?덉떆 ?좏겙 (7??
- **RBAC**: ??븷 湲곕컲 ?묎렐 ?쒖뼱 (Admin, User, Guest)

**?뷀샇???꾨왂:**
- **?꾩넚 ?뷀샇??*: TLS 1.3, HSTS 媛뺤젣
- **????뷀샇??*: AES-256-GCM 而щ읆 ?덈꺼 ?뷀샇??- **??愿由?*: AWS KMS, HashiCorp Vault
- **?댁떛**: bcrypt (鍮꾨?踰덊샇), SHA-256 (?뚯씪)

**蹂댁븞 紐⑤땲?곕쭅:**
- **移⑥엯 ?먯?**: WAF, DDoS 諛⑹뼱, 遊??먯?
- **濡쒓렇 遺꾩꽍**: SIEM 湲곕컲 ?ㅼ떆媛??꾪삊 ?먯?
- **痍⑥빟???ㅼ틪**: ?뺢린??蹂댁븞 ?먭? (??1??
- **移⑦닾 ?뚯뒪??*: ?몃? ?꾨Ц?낆껜 ??2??
**?곗씠??蹂댄샇:**
- **媛쒖씤?뺣낫**: 留덉뒪?? ?듬챸?? 媛紐낇솕
- **?곗씠??蹂댁〈**: 3???먮룞 ??젣 ?뺤콉
- **援?쇅 ?댁쟾**: 媛쒖씤?뺣낫蹂댄샇踰?以??- **?곗씠??二쇨텒**: ?ъ슜???곗씠????젣 沅뚮━

**蹂댁븞 ?ш퀬 ???**
- **?ш퀬 ??묓?**: 24/7 蹂댁븞 ?댁쁺?쇳꽣
- **?듭떊 怨꾪쉷**: 怨좉컼, 洹쒖젣湲곌? ?좉퀬 ?덉감
- **蹂듦뎄 怨꾪쉷**: RTO 4?쒓컙, RPO 1?쒓컙
- **?ы썑 遺꾩꽍**: 猷⑦듃 ?먯씤 遺꾩꽍 諛?媛쒖꽑`;
        }

        function generatePerformanceSpecs(input) {
            const responseTime = Math.floor(Math.random() * 2) + 1; // 1-3珥?            const throughput = Math.floor(Math.random() * 2000) + 1000; // 1000-3000 req/sec
            const concurrentUsers = Math.floor(Math.random() * 50000) + 10000; // 1留?6留뚮챸
            
            return `**?깅뒫 紐⑺몴:**
${input.success_metric ? `- ${input.success_metric} ?ъ꽦???꾪븳 ?깅뒫 理쒖쟻?? : '- ?ъ슜???뺤쓽 ?깃났 吏???ъ꽦'}

**?듭떖 ?깅뒫 吏??**
- **?묐떟 ?쒓컙**: API ${responseTime}珥? UI 1珥??대궡
- **泥섎━??*: ${throughput} req/sec (?쇳겕 ?쒓컙)
- **?숈떆 ?ъ슜??*: ${concurrentUsers}紐?吏??- **媛?⑹꽦**: 99.9% (??43遺??ㅼ슫???

**?깅뒫 理쒖쟻???꾨왂:**
- **?곗씠?곕쿋?댁뒪**: ?몃뜳??理쒖쟻?? 荑쇰━ ?쒕떇
- **罹먯떛**: Redis ?대윭?ㅽ꽣, CDN ?쒖슜
- **濡쒕뱶 諛몃윴??*: Nginx + HAProxy
- **?뺤텞**: Gzip, Brotli ?뺤텞

**紐⑤땲?곕쭅 吏??**
- **?쒖뒪??*: CPU, 硫붾え由? ?붿뒪?? ?ㅽ듃?뚰겕
- **?좏뵆由ъ??댁뀡**: ?묐떟?쒓컙, ?먮윭?? 泥섎━??- **鍮꾩쫰?덉뒪**: ?ъ슜???쒕룞, ?꾪솚?? ?섏씡
- **蹂댁븞**: 濡쒓렇???ㅽ뙣, ?섏떖 ?쒕룞, 怨듦꺽 ?쒕룄

**?깅뒫 ?뚯뒪??**
- **遺???뚯뒪??*: JMeter 湲곕컲 10,000 ?숈떆 ?ъ슜??- **?ㅽ듃?덉뒪 ?뚯뒪??*: ?쒖뒪???쒓퀎??痢≪젙
- **?ㅽ뙆?댄겕 ?뚯뒪??*: 湲됯꺽???몃옒??利앷? ???- **吏?띿꽦 ?뚯뒪??*: 24?쒓컙 ?곗냽 遺???뚯뒪??
**?뺤옣??怨꾪쉷:**
- **?섑룊 ?뺤옣**: 留덉씠?щ줈?쒕퉬???낅┰???ㅼ??쇰쭅
- **?먮룞 ?ㅼ??쇰쭅**: CPU 70% 湲곗? ?먮룞 ?뺤옣
- **?곗씠?곕쿋?댁뒪**: ?쎄린 ?꾩슜 蹂듭젣蹂?異붽?
- **CDN**: 湲濡쒕쾶 ?ｌ? ?쒕쾭 諛고룷`;
        }

        function generateDeploymentStrategy(input) {
            const phases = [
                { name: 'Phase 1', duration: '1-2媛쒖썡', focus: '湲곕낯 ?명봽??援ъ텞' },
                { name: 'Phase 2', duration: '2-3媛쒖썡', focus: '?듭떖 湲곕뒫 媛쒕컻' },
                { name: 'Phase 3', duration: '1媛쒖썡', focus: '?듯빀 諛??뚯뒪?? },
                { name: 'Phase 4', duration: '吏?띿쟻', focus: '異쒖떆 諛??댁쁺' }
            ];
            
            return `**援ы쁽 濡쒕뱶留?**
${phases.map(phase => `
**${phase.name} (${phase.duration}):**
- **紐⑺몴**: ${phase.focus}
- **二쇱슂 ?묒뾽**: ${phase.name === 'Phase 1' ? 'AWS ?명봽?? CI/CD ?뚯씠?꾨씪??援ъ텞' : 
                   phase.name === 'Phase 2' ? `${input.core_features ? `"${input.core_features}"` : '?듭떖 湲곕뒫'} 媛쒕컻` :
                   phase.name === 'Phase 3' ? '?쒖뒪???듯빀, ?깅뒫 ?뚯뒪?? 蹂댁븞 寃利? :
                   '?댁쁺 紐⑤땲?곕쭅, ?ъ슜???쇰뱶諛??섏쭛'}
- **?곗텧臾?*: ${phase.name === 'Phase 1' ? '?명봽??肄붾뱶, 諛고룷 ?뚯씠?꾨씪?? :
               phase.name === 'Phase 2' ? '?듭떖 湲곕뒫, API 臾몄꽌' :
               phase.name === 'Phase 3' ? '?듯빀 ?쒖뒪?? ?뚯뒪??由ы룷?? :
               '?댁쁺 ??쒕낫?? ?ъ슜??媛?대뱶'}
- **?깃났 湲곗?**: ${phase.name === 'Phase 1' ? '?명봽???먮룞 諛고룷 ?깃났' :
                 phase.name === 'Phase 2' ? '?듭떖 湲곕뒫 ?숈옉 ?뺤씤' :
                 phase.name === 'Phase 3' ? '?깅뒫 紐⑺몴 ?ъ꽦' :
                 '?ъ슜??留뚯”??4.5/5.0'}
`).join('')}

**諛고룷 ?꾨왂:**
- **Blue-Green**: 臾댁쨷??諛고룷
- **移대굹由?*: ?먯쭊???몃옒???꾪솚
- **濡ㅻ갚**: ?먮룞 濡ㅻ갚 硫붿빱?덉쬁
- **紐⑤땲?곕쭅**: ?ㅼ떆媛?諛고룷 ?곹깭 異붿쟻

**?댁쁺 怨꾪쉷:**
- **24/7 紐⑤땲?곕쭅**: Prometheus + Grafana
- **?뚮┝ ?쒖뒪??*: PagerDuty 湲곕컲 ?먯뒪而щ젅?댁뀡
- **諛깆뾽 ?꾨왂**: ?쇱씪 ?꾩껜 + ?ㅼ떆媛?利앸텇
- **?ы빐 蹂듦뎄**: RTO 4?쒓컙, RPO 1?쒓컙

**? 援ъ꽦:**
- **媛쒕컻?**: ${Math.floor(Math.random() * 5) + 3}紐?(??ㅽ깮 媛쒕컻??
- **DevOps**: ${Math.floor(Math.random() * 3) + 2}紐?(?명봽???꾨Ц媛)
- **QA**: ${Math.floor(Math.random() * 3) + 1}紐?(?뚯뒪???붿??덉뼱)
- **PM**: 1紐?(?꾨줈?앺듃 愿由?

**?덉궛 怨꾪쉷:**
- **?명봽??鍮꾩슜**: ??${Math.floor(Math.random() * 50) + 20}留뚯썝
- **媛쒕컻 ?꾧뎄**: ${Math.floor(Math.random() * 10) + 5}留뚯썝
- **蹂댁븞 ?붾（??*: ${Math.floor(Math.random() * 20) + 10}留뚯썝
- **紐⑤땲?곕쭅**: ${Math.floor(Math.random() * 15) + 5}留뚯썝`;
        }

        function generateMarketAnalysis(input) {
            const marketSize = Math.floor(Math.random() * 5000) + 1000; // 1000-6000?듭썝
            const growthRate = Math.floor(Math.random() * 20) + 10; // 10-30%
            const competitors = Math.floor(Math.random() * 5) + 3; // 3-8媛?            
            return `**?쒖옣 洹쒕え 諛??깆옣??**
- ?꾩껜 ?쒖옣 洹쒕え: ${marketSize}?듭썝 (2024??湲곗?)
- ?고룊洹??깆옣瑜? ${growthRate}% (CAGR)
- ?덉긽 ?쒖옣 洹쒕え: ${Math.floor(marketSize * 1.3)}?듭썝 (2025??

**?寃?怨좉컼 ?몃텇??**
- **1李??寃?*: ${input.insight ? `"${input.insight}"` : '?듭떖 臾몄젣'}瑜?寃る뒗 B2B 怨좉컼
- **2李??寃?*: 以묒냼湲곗뾽 諛??ㅽ??몄뾽
- **3李??寃?*: 媛쒖씤 ?ъ슜??
**寃쎌웳 ?섍꼍:**
- 二쇱슂 寃쎌웳?? ${competitors}媛쒖궗
- ?쒖옣 ?먯쑀?? 1??湲곗뾽 25%, 2??15%, 3??10%
- 吏꾩엯 ?λ꼍: 以묎컙 ?섏? (湲곗닠??諛??먮낯 ?꾩슂)

**?쒖옣 湲고쉶:**
- 誘몄땐議??덉쫰: ?꾩껜 ?쒖옣??30% 誘명빐寃?- 湲곗닠 ?곸떊 湲고쉶: AI/ML ?쒖슜??李⑤퀎??媛??- ?좉퇋 ?쒖옣 李쎌텧: B2B2C 紐⑤뜽 ?뺤옣`;
        }

        function generateCompetitiveAnalysis(input) {
            const competitors = ['湲곗뾽A', '湲곗뾽B', '湲곗뾽C', '湲곗뾽D'];
            const selectedCompetitors = competitors.slice(0, Math.floor(Math.random() * 3) + 2);
            
            return `**二쇱슂 寃쎌웳??遺꾩꽍:**
${selectedCompetitors.map((comp, index) => `
**${comp}:**
- 媛뺤젏: ${['湲곗닠??, '釉뚮옖??, '媛寃?, '?쒕퉬??][index]} ?곗쐞
- ?쎌젏: ${['?뺤옣??, '?ъ슜??寃쏀뿕', '留덉???, '湲곗닠'][index]} 遺議?- ?쒖옣 ?먯쑀?? ${Math.floor(Math.random() * 20) + 5}%
- 媛寃??뺤콉: ${['?꾨━誘몄뾼', '寃쎌웳??, '?媛', '李⑤퀎??][index]}
`).join('')}

**寃쎌웳 ?곗쐞 ?붿냼:**
- 湲곗닠??李⑤퀎?? ${input.core_features ? `"${input.core_features}"` : '?듭떖 湲곕뒫'} 湲곕컲
- ?ъ슜??寃쏀뿕: 吏곴????명꽣?섏씠??諛?鍮좊Ⅸ ?묐떟
- 媛寃?寃쎌웳?? ?⑸━??媛寃??뺤콉
- ?쒕퉬???덉쭏: 24/7 怨좉컼 吏??
**?쒖옣 ?ъ??붾떇:**
- 李⑤퀎???ъ씤?? ${input.principle ? `"${input.principle}"` : '?ъ슜???먯튃'} 湲곕컲 ?쒕퉬??- ?寃?怨좉컼: ${input.insight ? `"${input.insight}"` : '?듭떖 臾몄젣'} ?닿껐???꾩슂??湲곗뾽
- 媛移??쒖븞: 鍮꾩슜 ?⑥쑉??諛??앹궛???μ긽`;
        }

        function generateFinancialProjections(input) {
            const year1 = Math.floor(Math.random() * 50) + 20; // 20-70?듭썝
            const year2 = Math.floor(year1 * (1.5 + Math.random() * 0.5)); // 1.5-2諛?            const year3 = Math.floor(year2 * (1.3 + Math.random() * 0.3)); // 1.3-1.6諛?            
            return `**?덉궛 諛곕텇 (珥?${Math.floor(Math.random() * 5) + 3}?듭썝):**
- **媛쒕컻鍮?(40%)**: ${Math.floor((Math.floor(Math.random() * 5) + 3) * 0.4)}?듭썝
  - ?몃젰鍮? 60%
  - ?명봽?? 25%
  - ?꾧뎄 諛??쇱씠?좎뒪: 15%
  
- **留덉??낅퉬 (30%)**: ${Math.floor((Math.floor(Math.random() * 5) + 3) * 0.3)}?듭썝
  - ?붿???留덉??? 50%
  - ?대깽??諛?而⑦띁?곗뒪: 30%
  - PR 諛?肄섑뀗痢? 20%
  
- **?댁쁺鍮?(30%)**: ${Math.floor((Math.floor(Math.random() * 5) + 3) * 0.3)}?듭썝
  - ?명봽???댁쁺: 40%
  - 怨좉컼 吏?? 35%
  - 愿由?諛??쇰컲: 25%

**?섏씡 ?덉륫:**
- **1?꾩감**: ${year1}?듭썝 (??${Math.floor(year1/12)}?듭썝)
- **2?꾩감**: ${year2}?듭썝 (??${Math.floor(year2/12)}?듭썝)
- **3?꾩감**: ${year3}?듭썝 (??${Math.floor(year3/12)}?듭썝)

**?섏씡??遺꾩꽍:**
- ?먯씡遺꾧린?? 18媛쒖썡
- ?쒖씠?듬쪧: 3?꾩감 25% 紐⑺몴
- ROI: 3????300% ?ъ꽦 ?덉긽`;
        }

        function generateRiskAssessment(input) {
            const risks = [
                '湲곗닠??蹂듭옟?깆쑝濡??명븳 媛쒕컻 吏??,
                '?쒖옣 寃쎌웳 ?ы솕濡??명븳 媛寃??뺣컯',
                '?듭떖 ?몃젰 ?댄깉濡??명븳 ?꾨줈?앺듃 吏??,
                '洹쒖젣 蹂?붾줈 ?명븳 鍮꾩쫰?덉뒪 紐⑤뜽 ?섏젙 ?꾩슂',
                '寃쎌젣 遺덊솴?쇰줈 ?명븳 怨좉컼 援щℓ??媛먯냼'
            ];
            
            const selectedRisks = risks.slice(0, Math.floor(Math.random() * 3) + 2);
            
            return `**二쇱슂 由ъ뒪??諛??꾪솕 諛⑹븞:**
${selectedRisks.map((risk, index) => `
**${index + 1}. ${risk}**
- 諛쒖깮 ?뺣쪧: ${Math.floor(Math.random() * 30) + 20}%
- ?곹뼢?? ${['?믪쓬', '以묎컙', '??쓬'][index % 3]}
- ?꾪솕 諛⑹븞: ${['湲곗닠 寃利?, '?쒖옣 議곗궗', '?몃젰 ?뺣낫', '洹쒖젣 紐⑤땲?곕쭅', '?ㅺ컖??][index]}
`).join('')}

**由ъ뒪??愿由??꾨왂:**
- ?뺢린??由ъ뒪???됯? (遺꾧린蹂?
- ???怨꾪쉷 ?섎┰ 諛?以鍮?- ?듭떖 ?몃젰 ?좎? 諛⑹븞 留덈젴
- ?쒖옣 蹂??紐⑤땲?곕쭅 泥닿퀎 援ъ텞`;
        }

        // ?곕え ?묐떟 ?앹꽦 (AI 遺꾩꽍 ?쒕??덉씠??
        function generateDemoResponse(docType, prompt) {
            const input = projectData.user_input;
            
            if (docType === 'BRD') {
                // AI 遺꾩꽍 ?쒕??덉씠?섏쓣 ?꾪븳 異붽? ?곗씠???앹꽦
                const marketAnalysis = generateMarketAnalysis(input);
                const competitiveAnalysis = generateCompetitiveAnalysis(input);
                const financialProjections = generateFinancialProjections(input);
                const riskAssessment = generateRiskAssessment(input);
                
                return `# Business Requirements Document

## 1. Executive Summary
???꾨줈?앺듃??"${input.insight || '?ъ슜???뺤쓽 ?듭떖 ?몄궗?댄듃'}"瑜??닿껐?섍린 ?꾪븳 ?곸떊?곸씤 鍮꾩쫰?덉뒪 ?붾（?섏엯?덈떎. ${input.evidence ? `寃利앸맂 ?곗씠?곗뿉 ?곕Ⅴ硫?${input.evidence}?대ŉ,` : ''} ?대? ?듯빐 ?쒖옣?먯꽌??寃쎌웳 ?곗쐞瑜??뺣낫?섍퀬 吏??媛?ν븳 鍮꾩쫰?덉뒪 媛移섎? 李쎌텧?섎뒗 寃껋쓣 紐⑺몴濡??⑸땲??

**?듭떖 媛移??쒖븞:**
- ?ъ슜??以묒떖???붾（???ㅺ퀎
- ?곗씠??湲곕컲 ?섏궗寃곗젙 吏??- ?뺤옣 媛?ν븳 鍮꾩쫰?덉뒪 紐⑤뜽

## 2. Business Objectives
${input.success_metric ? `- ${input.success_metric}` : '- ?ъ슜???뺤쓽 ?깃났 吏???ъ꽦'}

**?꾨왂??紐⑺몴:**
- ?쒖옣 ?먯쑀??15% ?뺣낫 (泥?2????
- 怨좉컼 留뚯”??4.5/5.0 ?ъ꽦
- ?곌컙 留ㅼ텧 50% ?깆옣
- 釉뚮옖???몄????μ긽

**痢≪젙 吏??**
- ?붽컙 ?쒖꽦 ?ъ슜????(MAU)
- 怨좉컼 ?띾뱷 鍮꾩슜 (CAC)
- 怨좉컼 ?앹븷 媛移?(LTV)
- ?쒖텛泥쒖???(NPS)

## 3. Market Analysis
${marketAnalysis}

## 4. Problem Statement
**?듭떖 臾몄젣:**
${input.insight ? `"${input.insight}"` : '?ъ슜?먭? ?앸퀎???듭떖 臾몄젣'}

**臾몄젣???ш컖??**
- ?꾩옱 ?쒖옣?먯꽌 ?곌컙 ${Math.floor(Math.random() * 1000) + 500}?듭썝???먯떎 諛쒖깮
- ?ъ슜??寃쏀뿕 ??섎줈 ?명븳 怨좉컼 ?댄깉瑜?利앷?
- 鍮꾪슚?⑥쟻???꾨줈?몄뒪濡??명븳 ?댁쁺鍮?利앷?

**鍮꾩쫰?덉뒪 ?곹뼢:**
- 留ㅼ텧 媛먯냼: ?곌컙 20-30% ?깆옣 ???- 怨좉컼 留뚯”???섎씫: NPS ?먯닔 30% 媛먯냼
- 寃쎌웳???쏀솕: ?쒖옣 ?먯쑀??媛먯냼

## 5. Proposed Solution
**?붾（??媛쒖슂:**
${input.core_features ? `?듭떖 湲곕뒫: ${input.core_features}` : '?ъ슜???뺤쓽 ?듭떖 湲곕뒫??湲곕컲?쇰줈 ???붾（??}

**湲곗닠???곸떊:**
- AI/ML 湲곕컲 ?먮룞???쒖뒪??- ?ㅼ떆媛??곗씠??遺꾩꽍 諛??몄궗?댄듃 ?쒓났
- ?ъ슜??移쒗솕???명꽣?섏씠???ㅺ퀎
- ?대씪?곕뱶 湲곕컲 ?뺤옣 媛?ν븳 ?꾪궎?띿쿂

**鍮꾩쫰?덉뒪 紐⑤뜽:**
- SaaS 湲곕컲 援щ룆 紐⑤뜽
- ?꾨━誘몄뾼 湲곕뒫 李⑤퀎??- ?뚰듃?덉떗???듯븳 ?쒖옣 ?뺤옣

## 6. Success Criteria
**?뺣웾??KPI:**
${input.success_metric ? `- ${input.success_metric}` : '- ?ъ슜???뺤쓽 ?깃났 吏??}

**異붽? ?깃낵 吏??**
- ?ъ슜??利앷??? ??20% ?깆옣
- ?섏씡?? 6媛쒖썡 ???묒옄 ?꾪솚
- ?쒖옣 ?먯쑀?? 2????10% ?ъ꽦
- 怨좉컼 ?좎??? 90% ?댁긽

**?뺤꽦??吏??**
- ?ъ슜??留뚯”???μ긽
- ?쒖옣 ?몄???利앸?
- 釉뚮옖??媛移??곸듅
- ?낃퀎 由щ뜑???뺣낫

## 7. Stakeholders
**二쇱슂 ?댄빐愿怨꾩옄:**
- **?꾨줈?앺듃 ?ㅽ룿??*: ?꾨왂??諛⑺뼢 ?ㅼ젙 諛??먯썝 諛곕텇
- **媛쒕컻?**: 湲곗닠??援ы쁽 諛??덉쭏 蹂댁쬆
- **?ъ슜??怨좉컼**: ?붾（??寃利?諛??쇰뱶諛??쒓났
- **鍮꾩쫰?덉뒪 ?뚰듃??*: ?쒖옣 ?뺤옣 諛??묐젰
- **?ъ옄??*: ?먭툑 吏??諛??깆옣 媛?랁솕

**?섏궗寃곗젙 ?꾨줈?몄뒪:**
- ?꾨왂??寃곗젙: C-?덈꺼 ?뱀씤 ?꾩슂
- ?쒗뭹 寃곗젙: ?쒗뭹 愿由ъ옄 二쇰룄
- 湲곗닠 寃곗젙: CTO 諛?湲곗닠? 寃??
## 8. Constraints & Risks
**?쒖빟 ?ы빆:**
${input.principle ? `?덈? ?먯튃: ${input.principle}` : '?ъ슜???뺤쓽 ?쒖빟 ?ы빆'}

**湲곗닠???쒖빟:**
- 媛쒕컻 湲곌컙: 6媛쒖썡 ??MVP 異쒖떆
- ?덉궛 ?쒗븳: 珥?媛쒕컻鍮?5?듭썝 ?대궡
- ?몃젰 ?쒖빟: ?꾩옱 ? 洹쒕え ?좎?
- 洹쒖젣 以?? 媛쒖씤?뺣낫蹂댄샇踰???
**二쇱슂 由ъ뒪??**
${riskAssessment}

## 9. Timeline & Milestones
**媛쒕컻 濡쒕뱶留?**
- **Phase 1 (1-2媛쒖썡)**: 湲고쉷 諛??ㅺ퀎
  - ?붽뎄?ы빆 ?뺤쓽 ?꾨즺
  - 湲곗닠 ?ㅽ깮 ?좎젙
  - ? 援ъ꽦 諛???븷 遺꾨떞
  
- **Phase 2 (2-3媛쒖썡)**: 媛쒕컻 諛??뚯뒪??  - ?듭떖 湲곕뒫 媛쒕컻
  - ?ъ슜???뚯뒪??吏꾪뻾
  - ?쇰뱶諛?諛섏쁺 諛?媛쒖꽑
  
- **Phase 3 (1媛쒖썡)**: 異쒖떆 諛??댁쁺
  - 踰좏? ?뚯뒪???꾨즺
  - ?뺤떇 異쒖떆
  - 珥덇린 ?ъ슜??吏??
**二쇱슂 留덉씪?ㅽ넠:**
- MVP 媛쒕컻 ?꾨즺 (3媛쒖썡)
- 踰좏? ?뚯뒪???쒖옉 (4媛쒖썡)
- ?뺤떇 異쒖떆 (6媛쒖썡)
- ?쒖옣 ?뺤옣 (12媛쒖썡)

## 10. Budget & Resources
**?꾩슂 由ъ냼??**
${input.capability ? `? ??웾: ${input.capability}` : '?ъ슜???????웾??湲곕컲?쇰줈 ??由ъ냼??怨꾪쉷'}

**?덉궛 諛곕텇:**
${financialProjections}

**?ъ옄 ?鍮??④낵:**
- ROI: 3????300% ?ъ꽦 ?덉긽
- 鍮꾩슜 ?덇컧: ?곌컙 ?댁쁺鍮?30% ?덇컧
- ?섏씡 李쎌텧: 2?????곕ℓ異?100?듭썝 紐⑺몴

---

*??臾몄꽌??Claude Sonnet 4.5 AI媛 ?ъ슜???낅젰 ?곗씠?곕? 遺꾩꽍?섏뿬 ?앹꽦?덉뒿?덈떎.*
*?앹꽦?? ${new Date().toLocaleDateString('ko-KR')}*
*?꾨줈?앺듃 ID: ${projectData.id}*
*AI 紐⑤뜽: Claude-3-5-Sonnet-20241022*`;
            }
            
            if (docType === 'PRD') {
                // AI 遺꾩꽍 ?쒕??덉씠?섏쓣 ?꾪븳 異붽? ?곗씠???앹꽦
                const userPersonas = generateUserPersonas(input);
                const featureAnalysis = generateFeatureAnalysis(input);
                const userStories = generateUserStories(input);
                const technicalSpecs = generateTechnicalSpecs(input);
                
                return `# Product Requirements Document

## 1. Product Overview
${input.insight ? `"${input.insight}"` : '?ъ슜???뺤쓽 ?듭떖 ?몄궗?댄듃'}瑜??닿껐?섍린 ?꾪븳 ?곸떊?곸씤 ?쒗뭹?낅땲?? ${input.core_features ? `?듭떖 湲곕뒫?쇰줈??${input.core_features}媛 ?덉쑝硫?` : '?ъ슜?먭? ?뺤쓽???듭떖 湲곕뒫???ы븿?섎ŉ,'} ?대? ?듯빐 ?ъ슜??寃쏀뿕???곸떊?섍퀬 鍮꾩쫰?덉뒪 媛移섎? 李쎌텧?섎뒗 寃껋쓣 紐⑺몴濡??⑸땲??

**?쒗뭹 鍮꾩쟾:**
- ?ъ슜??以묒떖??吏곴????명꽣?섏씠??- ?곗씠??湲곕컲 ?몄궗?댄듃 ?쒓났
- ?뺤옣 媛?ν븳 ?뚮옯???꾪궎?띿쿂

## 2. User Personas
${userPersonas}

## 3. Feature Requirements
${featureAnalysis}

## 4. User Stories
${userStories}

## 5. User Experience
**?ъ슜??寃쏀뿕 ?ㅺ퀎:**
- 吏곴??곸씤 ?명꽣?섏씠?? 3?대┃ ?대궡 ?듭떖 湲곕뒫 ?묎렐
- ${input.principle ? `"${input.principle}"` : '?ъ슜???먯튃'} 以??- ?⑥쑉?곸씤 ?뚰겕?뚮줈?? ?묒뾽 ?쒓컙 50% ?⑥텞

**UI/UX 媛?대뱶?쇱씤:**
- **?붿옄???쒖뒪??*: ?쇨????됱긽, ??댄룷洹몃옒?? 媛꾧꺽
- **?묎렐??*: WCAG 2.1 AA ?섏? 以??- **諛섏쓳??*: 紐⑤컮?? ?쒕툝由? ?곗뒪?ы넲 理쒖쟻??- **?깅뒫**: 珥덇린 濡쒕뵫 3珥??대궡

## 6. Functional Requirements
**?듭떖 湲곕뒫 紐낆꽭:**
${input.core_features ? `- ${input.core_features}` : '- ?ъ슜???뺤쓽 ?듭떖 湲곕뒫'}

**?곸꽭 湲곕뒫 ?붽뎄?ы빆:**
- **?ъ슜???몄쬆**: ?뚯뀥 濡쒓렇?? ?대찓???몄쬆
- **?곗씠??泥섎━**: ?ㅼ떆媛?遺꾩꽍 諛??쒓컖??- **?뚮┝ ?쒖뒪??*: ?대찓?? ?몄떆, SMS ?뚮┝
- **蹂닿퀬???앹꽦**: ?먮룞?붾맂 由ы룷??諛???쒕낫??
**鍮꾩쫰?덉뒪 洹쒖튃:**
- ?ъ슜??沅뚰븳 湲곕컲 ?곗씠???묎렐 ?쒖뼱
- ?곗씠??蹂댁〈 ?뺤콉: 3?꾧컙 蹂닿?
- 媛쒖씤?뺣낫 泥섎━: GDPR, 媛쒖씤?뺣낫蹂댄샇踰?以??
## 7. Non-Functional Requirements
**?깅뒫 ?붽뎄?ы빆:**
- **?묐떟 ?쒓컙**: API ?묐떟 2珥??대궡, UI 諛섏쓳 1珥??대궡
- **泥섎━??*: ?숈떆 ?ъ슜??1,000紐?吏??- **媛?⑹꽦**: 99.9% ?낇???蹂댁옣
- **?뺤옣??*: ?ъ슜??利앷????곕Ⅸ ?먮룞 ?ㅼ??쇰쭅

**蹂댁븞 ?붽뎄?ы빆:**
- **?몄쬆**: JWT 湲곕컲 ?좏겙 ?몄쬆
- **?뷀샇??*: AES-256 ?곗씠???뷀샇??- **?ㅽ듃?뚰겕**: HTTPS/TLS 1.3 ?듭떊
- **媛먯궗**: 紐⑤뱺 ?ъ슜???쒕룞 濡쒓퉭

## 8. Data Requirements
**?곗씠??紐⑤뜽:**
- **?ъ슜???곗씠??*: ?꾨줈?? ?ㅼ젙, 沅뚰븳
- **鍮꾩쫰?덉뒪 ?곗씠??*: ?듭떖 鍮꾩쫰?덉뒪 濡쒖쭅
- **遺꾩꽍 ?곗씠??*: ?ъ슜???됰룞, ?깃낵 吏??- **?쒖뒪???곗씠??*: 濡쒓렇, 媛먯궗, 諛깆뾽

**?곗씠???뚮줈??**
- **?섏쭛**: ?ㅼ떆媛??곗씠???섏쭛 諛?寃利?- **泥섎━**: ETL ?뚯씠?꾨씪?몄쓣 ?듯븳 ?곗씠??蹂??- **???*: 愿怨꾪삎/NoSQL ?섏씠釉뚮━?????- **遺꾩꽍**: ML 湲곕컲 ?몄궗?댄듃 ?앹꽦

## 9. Integration Requirements
**?몃? ?쒖뒪???곕룞:**
- **CRM ?쒖뒪??*: Salesforce, HubSpot ?곕룞
- **寃곗젣 ?쒖뒪??*: Stripe, PayPal ?곕룞
- **?대찓???쒕퉬??*: SendGrid, Mailchimp ?곕룞
- **遺꾩꽍 ?꾧뎄**: Google Analytics, Mixpanel ?곕룞

**API 紐낆꽭:**
- **RESTful API**: ?쒖? HTTP 硫붿꽌??- **GraphQL**: ?⑥쑉?곸씤 ?곗씠??荑쇰━
- **Webhook**: ?ㅼ떆媛??대깽???뚮┝
- **SDK**: JavaScript, Python, Java SDK ?쒓났

## 10. Success Metrics
**?듭떖 ?깃났 吏??**
${input.success_metric ? `- ${input.success_metric}` : '- ?ъ슜???뺤쓽 ?깃났 吏??}

**異붽? 痢≪젙 吏??**
- **?ъ슜??李몄뿬??*: DAU/MAU 鍮꾩쑉 30% ?댁긽
- **湲곕뒫 ?쒖슜??*: ?듭떖 湲곕뒫 ?ъ슜瑜?80% ?댁긽
- **?ъ슜??留뚯”??*: NPS ?먯닔 50 ?댁긽
- **湲곗닠???깃낵**: ?쒖뒪???덉젙??99.9% ?좎?

**痢≪젙 諛⑸쾿:**
- **A/B ?뚯뒪??*: 湲곕뒫蹂??깃낵 鍮꾧탳
- **?ъ슜???쇰뱶諛?*: ?뺢린???ㅻЦ議곗궗
- **?곗씠??遺꾩꽍**: ?ъ슜???됰룞 ?⑦꽩 遺꾩꽍
- **?깃낵 由щ럭**: 遺꾧린蹂?KPI ?됯?

---

*??臾몄꽌??Claude Sonnet 4.5 AI媛 ?ъ슜???낅젰 ?곗씠?곕? 遺꾩꽍?섏뿬 ?앹꽦?덉뒿?덈떎.*
*?앹꽦?? ${new Date().toLocaleDateString('ko-KR')}*
*?꾨줈?앺듃 ID: ${projectData.id}*
*AI 紐⑤뜽: Claude-3-5-Sonnet-20241022*`;
            }
            
            if (docType === 'TRD') {
                // AI 遺꾩꽍 ?쒕??덉씠?섏쓣 ?꾪븳 異붽? ?곗씠???앹꽦
                const systemArchitecture = generateSystemArchitecture(input);
                const technologyStack = generateTechnologyStack(input);
                const dataArchitecture = generateDataArchitecture(input);
                const securityFramework = generateSecurityFramework(input);
                const performanceSpecs = generatePerformanceSpecs(input);
                const deploymentStrategy = generateDeploymentStrategy(input);
                
                return `# Technical Requirements Document

## 1. Technical Overview
${input.insight ? `"${input.insight}"` : '?ъ슜???뺤쓽 ?듭떖 ?몄궗?댄듃'}瑜??닿껐?섍린 ?꾪븳 ?곸떊?곸씤 湲곗닠???붾（?섏엯?덈떎. ${input.capability ? `?????웾??${input.capability}???쒖슜?섏뿬 援ы쁽?섎ŉ,` : '?ъ슜???????웾??湲곕컲?쇰줈 援ы쁽?섎ŉ,'} 理쒖떊 湲곗닠 ?몃젋?쒖? ?뺤옣 媛?ν븳 ?꾪궎?띿쿂瑜??듯빐 吏??媛?ν븳 湲곗닠??媛移섎? 李쎌텧?섎뒗 寃껋쓣 紐⑺몴濡??⑸땲??

**湲곗닠 鍮꾩쟾:**
- 留덉씠?щ줈?쒕퉬??湲곕컲 ?뺤옣 媛?ν븳 ?꾪궎?띿쿂
- AI/ML 湲곕컲 吏?ν삎 ?쒖뒪??- ?대씪?곕뱶 ?ㅼ씠?곕툕 ?ㅺ퀎 ?먯튃

## 2. System Architecture
${systemArchitecture}

## 3. Technology Stack
${technologyStack}

## 4. Data Architecture
${dataArchitecture}

## 5. API Design
**API ?ㅺ퀎 ?먯튃:**
- **RESTful API**: ?쒖? HTTP 硫붿꽌??(GET, POST, PUT, DELETE)
- **GraphQL**: ?⑥쑉?곸씤 ?곗씠??荑쇰━ 諛??ㅼ떆媛?援щ룆
- **?몄쬆**: JWT + OAuth 2.0 湲곕컲 ?좏겙 ?몄쬆
- **Rate Limiting**: ?ъ슜?먮퀎 1000 req/min, API蹂?10000 req/min
- **踰꾩쟾 愿由?*: API v1, v2 ?명솚???좎?

**API ?붾뱶?ъ씤???ㅺ퀎:**
- **?몄쬆 API**: `/api/v1/auth/*` - 濡쒓렇?? ?뚯썝媛?? ?좏겙 媛깆떊
- **?ъ슜??API**: `/api/v1/users/*` - ?꾨줈??愿由? ?ㅼ젙
- **鍮꾩쫰?덉뒪 API**: `/api/v1/business/*` - ?듭떖 鍮꾩쫰?덉뒪 濡쒖쭅
- **遺꾩꽍 API**: `/api/v1/analytics/*` - ?곗씠??遺꾩꽍 諛?由ы룷??
**API 臾몄꽌??**
- **Swagger/OpenAPI**: ?먮룞 ?앹꽦 API 臾몄꽌
- **Postman Collection**: 媛쒕컻???API ?뚯뒪??- **SDK ?쒓났**: JavaScript, Python, Java SDK

## 6. Security Requirements
${securityFramework}

## 7. Performance Requirements
${performanceSpecs}

## 8. Scalability & Availability
**?뺤옣???ㅺ퀎:**
- **?섑룊???뺤옣**: 留덉씠?щ줈?쒕퉬??湲곕컲 ?낅┰???ㅼ??쇰쭅
- **濡쒕뱶 諛몃윴??*: Nginx + HAProxy 湲곕컲 ?몃옒??遺꾩궛
- **?먮룞 ?ㅼ??쇰쭅**: Kubernetes HPA 湲곕컲 ?숈쟻 由ъ냼??議곗젙
- **罹먯떛 ?꾨왂**: Redis ?대윭?ㅽ꽣 + CDN 湲곕컲 ?ㅼ링 罹먯떛

**怨좉??⑹꽦 ?ㅺ퀎:**
- **Multi-AZ 諛고룷**: 3媛?媛?⑹쁺??遺꾩궛 諛고룷
- **?μ븷 蹂듦뎄**: RTO 15遺? RPO 5遺?紐⑺몴
- **諛깆뾽 ?꾨왂**: ?쇱씪 ?꾩껜 諛깆뾽 + ?ㅼ떆媛?利앸텇 諛깆뾽
- **紐⑤땲?곕쭅**: Prometheus + Grafana 湲곕컲 ?ㅼ떆媛?紐⑤땲?곕쭅

**遺??遺꾩궛:**
- **API Gateway**: Kong 湲곕컲 API ?쇱슦??諛??쒗븳
- **?곗씠?곕쿋?댁뒪**: ?쎄린 ?꾩슜 蹂듭젣蹂?3媛?援ъ꽦
- **?뚯씪 ???*: S3 湲곕컲 遺꾩궛 ?뚯씪 ?쒖뒪??- **CDN**: CloudFront 湲곕컲 湲濡쒕쾶 肄섑뀗痢?諛고룷

## 9. Development Guidelines
**媛쒕컻 ?섍꼍:**
- **IDE**: VS Code, IntelliJ IDEA 沅뚯옣
- **肄붾뵫 而⑤깽??*: ESLint, Prettier 湲곕컲 ?먮룞 ?щ㎎??- **Git ?뚰겕?뚮줈??*: GitFlow 釉뚮옖移??꾨왂
- **肄붾뱶 由щ럭**: Pull Request ?꾩닔, 2紐??댁긽 ?뱀씤

**?뚯뒪???꾨왂:**
- **?⑥쐞 ?뚯뒪??*: Jest, JUnit 湲곕컲 90% 而ㅻ쾭由ъ? 紐⑺몴
- **?듯빀 ?뚯뒪??*: API ?뚯뒪???먮룞??- **E2E ?뚯뒪??*: Cypress 湲곕컲 ?ъ슜???쒕굹由ъ삤 ?뚯뒪??- **?깅뒫 ?뚯뒪??*: JMeter 湲곕컲 遺???뚯뒪??
**CI/CD ?뚯씠?꾨씪??**
- **鍮뚮뱶**: Docker 湲곕컲 硫???ㅽ뀒?댁? 鍮뚮뱶
- **?뚯뒪??*: ?먮룞?붾맂 ?뚯뒪???ㅽ뻾 諛??덉쭏 寃뚯씠??- **諛고룷**: Blue-Green 諛고룷 ?꾨왂
- **濡ㅻ갚**: ?먮룞 濡ㅻ갚 硫붿빱?덉쬁

## 10. Implementation Roadmap
${deploymentStrategy}

---

*??臾몄꽌??Claude Sonnet 4.5 AI媛 ?ъ슜???낅젰 ?곗씠?곕? 遺꾩꽍?섏뿬 ?앹꽦?덉뒿?덈떎.*
*?앹꽦?? ${new Date().toLocaleDateString('ko-KR')}*
*?꾨줈?앺듃 ID: ${projectData.id}*
*AI 紐⑤뜽: Claude-3-5-Sonnet-20241022*`;
            }
        }

        // ?ъ슜???낅젰 湲곕컲 BRD ?댁슜 ?앹꽦
        function createBRDContent(input) {
            return `# Business Requirements Document

## 1. Executive Summary
${input.insight ? `???꾨줈?앺듃??"${input.insight}"?쇰뒗 ?듭떖 ?몄궗?댄듃瑜?諛뷀깢?쇰줈 ?쒖옉?섏뿀?듬땲??` : '???꾨줈?앺듃???ъ슜?먯쓽 ?듭떖 ?몄궗?댄듃瑜?諛뷀깢?쇰줈 ?쒖옉?섏뿀?듬땲??'} ${input.evidence ? `寃利앸맂 洹쇨굅???곕Ⅴ硫?${input.evidence}?낅땲??` : '?ъ슜?먭? ?쒓났??寃利?洹쇨굅瑜?諛뷀깢?쇰줈 ?⑸땲??'} ?대? ?듯빐 鍮꾩쫰?덉뒪 媛移섎? 李쎌텧?섍퀬 ?쒖옣?먯꽌??寃쎌웳 ?곗쐞瑜??뺣낫?섎뒗 寃껋쓣 紐⑺몴濡??⑸땲??

## 2. Business Objectives
${input.success_metric ? `- ${input.success_metric}` : '- 援ъ껜?곸씤 ?깃났 吏?쒕? ?ъ꽦'}

**?듭떖 紐⑺몴:**
- ?ъ슜???낅젰 湲곕컲 鍮꾩쫰?덉뒪 紐⑺몴 ?ъ꽦
- ?쒖옣?먯꽌??寃쎌웳 ?곗쐞 ?뺣낫
- 吏??媛?ν븳 ?깆옣 紐⑤뜽 援ъ텞

## 3. Market Analysis
**?쒖옣 湲고쉶:**
${input.insight ? `?꾩옱 ?쒖옣?먯꽌 "${input.insight}"?쇰뒗 臾몄젣媛 議댁옱?섎ŉ, ?대? ?닿껐?????덈뒗 湲고쉶媛 ?덉뒿?덈떎.` : '?ъ슜?먭? ?앸퀎???쒖옣 湲고쉶瑜?遺꾩꽍?⑸땲??'}

**?寃?怨좉컼:**
- 二쇱슂 怨좉컼痢? ?ъ슜???낅젰 湲곕컲 ?뺤쓽
- 怨좉컼 ?덉쫰: ?듭떖 臾몄젣 ?닿껐
- ?쒖옣 洹쒕え: ?깆옣 ?좎옱??遺꾩꽍

## 4. Problem Statement
**?듭떖 臾몄젣:**
${input.insight ? `"${input.insight}"` : '?ъ슜?먭? ?앸퀎???듭떖 臾몄젣'}

**鍮꾩쫰?덉뒪 ?곹뼢:**
- ?꾩옱 ?곹솴?먯꽌???먯떎 諛?湲고쉶鍮꾩슜
- 臾몄젣 吏?????덉긽?섎뒗 遺?뺤쟻 ?곹뼢
- ?쒓툒??諛?以묒슂??
## 5. Proposed Solution
**?붾（??媛쒖슂:**
${input.core_features ? `?듭떖 湲곕뒫: ${input.core_features}` : '?ъ슜?먭? ?쒖븞???듭떖 湲곕뒫??湲곕컲?쇰줈 ???붾（??}

**媛移??쒖븞:**
- ?ъ슜??臾몄젣 ?닿껐
- 鍮꾩쫰?덉뒪 媛移?李쎌텧
- 寃쎌웳 ?곗쐞 ?뺣낫

## 6. Success Criteria
**?뺣웾??KPI:**
${input.success_metric ? `- ${input.success_metric}` : '- ?ъ슜???뺤쓽 ?깃났 吏??}

**?뺤꽦??吏??**
- ?ъ슜??留뚯”???μ긽
- ?쒖옣 ?몄???利앸?
- 釉뚮옖??媛移??곸듅

## 7. Stakeholders
**二쇱슂 ?댄빐愿怨꾩옄:**
- ?꾨줈?앺듃 ?ㅽ룿??- 媛쒕컻?
- ?ъ슜??怨좉컼
- 鍮꾩쫰?덉뒪 ?뚰듃??
**??븷 諛?梨낆엫:**
- ?섏궗寃곗젙沅뚯옄: ?꾨왂??諛⑺뼢 ?ㅼ젙
- ?ㅽ뻾?: 援ъ껜??援ы쁽
- ?ъ슜?? ?쇰뱶諛?諛?寃利?
## 8. Constraints & Risks
**?쒖빟 ?ы빆:**
${input.principle ? `?덈? ?먯튃: ${input.principle}` : '?ъ슜???뺤쓽 ?쒖빟 ?ы빆'}

**二쇱슂 由ъ뒪??**
- 湲곗닠??蹂듭옟??- ?쒖옣 蹂??- ?먯썝 ?쒖빟

**?꾪솕 諛⑹븞:**
- ?④퀎???묎렐
- 吏?띿쟻 紐⑤땲?곕쭅
- ?좎뿰?????
## 9. Timeline & Milestones
**媛쒕컻 ?④퀎:**
- Phase 1: 湲고쉷 諛??ㅺ퀎 (1-2媛쒖썡)
- Phase 2: 媛쒕컻 諛??뚯뒪??(2-3媛쒖썡)
- Phase 3: 異쒖떆 諛??댁쁺 (1媛쒖썡)

**二쇱슂 留덉씪?ㅽ넠:**
- MVP 異쒖떆
- 踰좏? ?뚯뒪???꾨즺
- ?뺤떇 異쒖떆

## 10. Budget & Resources
**?꾩슂 由ъ냼??**
${input.capability ? `? ??웾: ${input.capability}` : '?ъ슜???????웾??湲곕컲?쇰줈 ??由ъ냼??怨꾪쉷'}

**?덉궛 異붿젙:**
- 媛쒕컻鍮? ? 洹쒕え 諛?湲곌컙???곕씪 ?곗젙
- 留덉??낅퉬: ?쒖옣 吏꾩엯 ?꾨왂
- ?댁쁺鍮? 吏?띿쟻 ?쒕퉬???댁쁺

**?ъ옄 ?鍮??④낵:**
- ROI ?덉긽移?- 鍮꾩슜 ?덇컧 ?④낵
- ?섏씡 李쎌텧 ?좎옱??
---

*??臾몄꽌???ъ슜???낅젰 ?곗씠?곕? 諛뷀깢?쇰줈 ?앹꽦?섏뿀?듬땲??*
*?앹꽦?? ${new Date().toLocaleDateString('ko-KR')}*
*?꾨줈?앺듃 ID: ${projectData.id}*`;
        }

        // BRD ?쒖떆
        function displayBRD(content) {
            document.getElementById('brdGenerating').style.display = 'none';
            document.getElementById('brdContentWrapper').style.display = 'block';
            document.getElementById('brdContent').innerHTML = convertMarkdownToHTML(content);
            document.getElementById('brdBadge').textContent = '?앹꽦 ?꾨즺';
            document.getElementById('brdBadge').className = 'document-badge badge-generated';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // BRD ?ㅻ쪟 ?쒖떆
        function showBRDError(errorMessage) {
            document.getElementById('brdGenerating').style.display = 'none';
            document.getElementById('brdError').style.display = 'block';
            document.getElementById('brdErrorText').textContent = errorMessage;
        }

        // BRD ?ъ깮??        async function regenerateBRD() {
            document.getElementById('brdContentWrapper').style.display = 'none';
            document.getElementById('brdGenerating').style.display = 'block';
            document.getElementById('brdBadge').textContent = '?앹꽦 以?;
            document.getElementById('brdBadge').className = 'document-badge badge-generating';
            
            await generateBRD();
        }

        // BRD ?ъ떆??        async function retryBRDGeneration() {
            document.getElementById('brdError').style.display = 'none';
            document.getElementById('brdGenerating').style.display = 'block';
            
            await generateBRD();
        }

        // BRD ?뱀씤 諛?PRD ?앹꽦
        async function approveBRD() {
            projectData.approveDocument('brd');
            projectData.updateStatus('prd_generating');
            updateWorkflowStatus('prd');
            
            // PRD ?붾㈃?쇰줈 ?꾪솚
            document.getElementById('brdScreen').classList.remove('active');
            document.getElementById('prdScreen').classList.add('active');
            
            document.getElementById('brdBadge').textContent = '?뱀씤??;
            document.getElementById('brdBadge').className = 'document-badge badge-approved';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // PRD ?앹꽦 ?쒖옉
            await generatePRD();
        }

        // PRD ?앹꽦
        async function generatePRD() {
            try {
                // AI ?꾨＼?꾪듃 ?앹꽦
                const prompt = createPRDPrompt();
                
                // ?ㅼ젣 AI API ?몄텧 (?꾩옱???곕え 紐⑤뱶)
                const prdContent = await callAIAPI(prompt, 'PRD');

                projectData.completeDocumentGeneration('prd', prdContent);
                displayPRD(prdContent);

            } catch (error) {
                console.error('PRD ?앹꽦 ?ㅻ쪟:', error);
                showPRDError(error.message);
            }
        }

        // PRD ?꾨＼?꾪듃 ?앹꽦
        function createPRDPrompt() {
            const input = projectData.user_input;
            const brd = projectData.documents.brd.content;
            return `?뱀떊? ?쒗뭹 愿由?諛??붽뎄?ы빆 遺꾩꽍 ?꾨Ц媛?낅땲?? ?꾨옒??BRD? ?ъ슜???낅젰??諛뷀깢?쇰줈 ?곸꽭??Product Requirements Document(PRD)瑜??묒꽦?댁＜?몄슂.

**BRD:**
${brd}

**?먮낯 ?ъ슜???낅젰:**
- ?듭떖 ?몄궗?댄듃: ${input.insight}
- 寃利?洹쇨굅: ${input.evidence}
- ? ??웾: ${input.capability}
- ?덈? ?먯튃: ${input.principle}
- ?깃났 ?뺤쓽: ${input.success_metric}
- ?듭떖 湲곕뒫: ${input.core_features}

---

**PRD ?묒꽦 媛?대뱶?쇱씤:**

## 1. Product Overview
- ?쒗뭹 鍮꾩쟾
- ?쒗뭹 紐⑺몴
- ?寃??ъ슜??
## 2. User Personas
- 二쇱슂 ?섎Ⅴ?뚮굹 (3-4媛?
- 媛??섎Ⅴ?뚮굹???덉쫰? ?섏씤 ?ъ씤??- ?ъ슜 ?쒕굹由ъ삤

## 3. Feature Requirements
媛?湲곕뒫留덈떎 ?ㅼ쓬???ы븿:
- 湲곕뒫 ?대쫫 諛??ㅻ챸
- ?곗꽑?쒖쐞 (P0/P1/P2)
- ?ъ슜???ㅽ넗由?- ?몄닔 湲곗?
- ?섏〈??
## 4. User Stories
- Epic蹂??ъ슜???ㅽ넗由?- ?ㅽ넗由??ъ씤??- Definition of Done

## 5. User Experience
- 二쇱슂 ?ъ슜???뚮줈??- ?붾㈃ 援ъ꽦 諛??덉씠?꾩썐
- ?명꽣?숈뀡 ?ㅺ퀎

## 6. Functional Requirements
- ?곸꽭 湲곕뒫 紐낆꽭
- ?낅젰/異쒕젰 ?뺤쓽
- 鍮꾩쫰?덉뒪 洹쒖튃

## 7. Non-Functional Requirements
- ?깅뒫 ?붽뎄?ы빆
- 蹂댁븞 ?붽뎄?ы빆
- ?뺤옣??諛?媛?⑹꽦
- ?묎렐??
## 8. Data Requirements
- ?곗씠??紐⑤뜽
- ?곗씠???뚮줈??- ??μ냼 ?붽뎄?ы빆

## 9. Integration Requirements
- ?몃? ?쒖뒪???곕룞
- API 紐낆꽭
- ?곗씠???숆린??
## 10. Success Metrics
- 湲곕뒫蹂??깃났 吏??- 痢≪젙 諛⑸쾿
- 紐⑺몴媛?
**以묒슂:**
- 媛쒕컻???諛붾줈 援ы쁽?????덉쓣 留뚰겮 援ъ껜?곸쑝濡??묒꽦?섏꽭??- 媛??붽뎄?ы빆? 紐낇솗?섍퀬 寃利?媛?ν빐???⑸땲??- ?곗꽑?쒖쐞瑜?紐낇솗???섏꽭??- 留덊겕?ㅼ슫 ?뺤떇?쇰줈 ?묒꽦?섏꽭??;
        }

        // ?ъ슜???낅젰 湲곕컲 PRD ?댁슜 ?앹꽦
        function createPRDContent(input) {
            return `# Product Requirements Document

## 1. Product Overview
${input.insight ? `"${input.insight}"` : '?ъ슜???뺤쓽 ?듭떖 ?몄궗?댄듃'}瑜??닿껐?섍린 ?꾪븳 ?쒗뭹?낅땲?? ${input.core_features ? `?듭떖 湲곕뒫?쇰줈??${input.core_features}媛 ?덉뒿?덈떎.` : '?ъ슜?먭? ?뺤쓽???듭떖 湲곕뒫???ы븿?⑸땲??'}

## 2. User Personas
**二쇱슂 ?ъ슜??**
- ?寃?怨좉컼: ?ъ슜???낅젰 湲곕컲 ?뺤쓽
- ?ъ슜???덉쫰: ${input.insight ? `"${input.insight}"` : '?듭떖 臾몄젣 ?닿껐'}
- ?ъ슜 ?⑦꽩: ?덉긽 ?ъ슜 ?쒕굹由ъ삤

## 3. Feature Requirements
**?듭떖 湲곕뒫:**
${input.core_features ? `- ${input.core_features}` : '- ?ъ슜???뺤쓽 ?듭떖 湲곕뒫'}

**?곗꽑?쒖쐞:**
- P0: ?듭떖 臾몄젣 ?닿껐 湲곕뒫
- P1: ?ъ슜??寃쏀뿕 ?μ긽 湲곕뒫
- P2: 遺媛 媛移?湲곕뒫

## 4. User Stories
**?ъ슜???쒕굹由ъ삤:**
- ?ъ슜?먮뒗 ${input.insight ? `"${input.insight}"` : '?듭떖 臾몄젣'}瑜??닿껐?????덈떎
- ?ъ슜?먮뒗 ${input.core_features ? `"${input.core_features}"` : '?듭떖 湲곕뒫'}???쒖슜?????덈떎
- ?ъ슜?먮뒗 ${input.success_metric ? `"${input.success_metric}"` : '?깃났 吏??}瑜??ъ꽦?????덈떎

## 5. User Experience
**?ъ슜??寃쏀뿕 ?ㅺ퀎:**
- 吏곴??곸씤 ?명꽣?섏씠??- ${input.principle ? `"${input.principle}"` : '?ъ슜???먯튃'} 以??- ?⑥쑉?곸씤 ?뚰겕?뚮줈??
## 6. Functional Requirements
**湲곕뒫???붽뎄?ы빆:**
- ?듭떖 湲곕뒫 援ы쁽
- ?곗씠??泥섎━ 諛?遺꾩꽍
- ?ъ슜???명꽣?숈뀡
- 寃곌낵 ?쒓났 諛??쇰뱶諛?
## 7. Non-Functional Requirements
**?깅뒫 ?붽뎄?ы빆:**
- ?묐떟 ?쒓컙: 3珥??대궡
- 媛?⑹꽦: 99% ?댁긽
- ?뺤옣?? ?ъ슜??利앷? ???- 蹂댁븞: ?곗씠??蹂댄샇

## 8. Data Requirements
**?곗씠???붽뎄?ы빆:**
- ?ъ슜???낅젰 ?곗씠??- 泥섎━ 寃곌낵 ?곗씠??- 遺꾩꽍 ?곗씠??- ?덉뒪?좊━ ?곗씠??
## 9. Integration Requirements
**?곕룞 ?붽뎄?ы빆:**
- ?몃? ?쒖뒪???곕룞
- API ?곕룞
- ?곗씠???숆린??- ?ㅼ떆媛?泥섎━

## 10. Success Metrics
**?깃났 吏??**
${input.success_metric ? `- ${input.success_metric}` : '- ?ъ슜???뺤쓽 ?깃났 吏??}

**痢≪젙 諛⑸쾿:**
- ?ъ슜???쇰뱶諛?- ?ъ슜??遺꾩꽍
- ?깃낵 痢≪젙
- 吏?띿쟻 媛쒖꽑

---

*??臾몄꽌???ъ슜???낅젰 ?곗씠?곕? 諛뷀깢?쇰줈 ?앹꽦?섏뿀?듬땲??*
*?앹꽦?? ${new Date().toLocaleDateString('ko-KR')}*
*?꾨줈?앺듃 ID: ${projectData.id}*`;
        }

        // PRD ?쒖떆
        function displayPRD(content) {
            document.getElementById('prdGenerating').style.display = 'none';
            document.getElementById('prdContentWrapper').style.display = 'block';
            document.getElementById('prdContent').innerHTML = convertMarkdownToHTML(content);
            document.getElementById('prdBadge').textContent = '?앹꽦 ?꾨즺';
            document.getElementById('prdBadge').className = 'document-badge badge-generated';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // PRD ?ㅻ쪟 ?쒖떆
        function showPRDError(errorMessage) {
            document.getElementById('prdGenerating').style.display = 'none';
            document.getElementById('prdError').style.display = 'block';
            document.getElementById('prdErrorText').textContent = errorMessage;
        }

        // PRD ?ъ깮??        async function regeneratePRD() {
            document.getElementById('prdContentWrapper').style.display = 'none';
            document.getElementById('prdGenerating').style.display = 'block';
            document.getElementById('prdBadge').textContent = '?앹꽦 以?;
            document.getElementById('prdBadge').className = 'document-badge badge-generating';
            
            await generatePRD();
        }

        // PRD ?ъ떆??        async function retryPRDGeneration() {
            document.getElementById('prdError').style.display = 'none';
            document.getElementById('prdGenerating').style.display = 'block';
            
            await generatePRD();
        }

        // PRD ?뱀씤 諛?TRD ?앹꽦
        async function approvePRD() {
            projectData.approveDocument('prd');
            projectData.updateStatus('trd_generating');
            updateWorkflowStatus('trd');
            
            document.getElementById('prdScreen').classList.remove('active');
            document.getElementById('trdScreen').classList.add('active');
            
            document.getElementById('prdBadge').textContent = '?뱀씤??;
            document.getElementById('prdBadge').className = 'document-badge badge-approved';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            await generateTRD();
        }

        // TRD ?앹꽦
        async function generateTRD() {
            try {
                // AI ?꾨＼?꾪듃 ?앹꽦
                const prompt = createTRDPrompt();
                
                // ?ㅼ젣 AI API ?몄텧 (?꾩옱???곕え 紐⑤뱶)
                const trdContent = await callAIAPI(prompt, 'TRD');

                projectData.completeDocumentGeneration('trd', trdContent);
                displayTRD(trdContent);

            } catch (error) {
                console.error('TRD ?앹꽦 ?ㅻ쪟:', error);
                showTRDError(error.message);
            }
        }

        // TRD ?꾨＼?꾪듃 ?앹꽦
        function createTRDPrompt() {
            const input = projectData.user_input;
            const brd = projectData.documents.brd.content;
            const prd = projectData.documents.prd.content;
            return `?뱀떊? ?뚰봽?몄썾???꾪궎?랁듃 諛?湲곗닠 ?ㅺ퀎 ?꾨Ц媛?낅땲?? BRD? PRD瑜?諛뷀깢?쇰줈 Technical Requirements Document(TRD)瑜??묒꽦?댁＜?몄슂.

**BRD ?붿빟:**
${brd.substring(0, 1000)}...

**PRD ?붿빟:**
${prd.substring(0, 1000)}...

**? ??웾:**
${input.capability}

---

**TRD ?묒꽦 媛?대뱶?쇱씤:**

## 1. Technical Overview
- 湲곗닠 鍮꾩쟾
- ?꾪궎?띿쿂 ?먯튃
- 湲곗닠 ?ㅽ깮 ?좎젙 ?댁쑀

## 2. System Architecture
- ?꾩껜 ?쒖뒪???꾪궎?띿쿂
- 二쇱슂 而댄룷?뚰듃
- ?곗씠???뚮줈??
## 3. Technology Stack
- Frontend 湲곗닠
- Backend 湲곗닠
- ?곗씠?곕쿋?댁뒪
- ?명봽??諛?DevOps
- ?몃? ?쒕퉬??
## 4. Data Architecture
- ?곗씠?곕쿋?댁뒪 ?ㅽ궎留?- ?곗씠??紐⑤뜽留?- 罹먯떛 ?꾨왂
- 諛깆뾽 諛?蹂듦뎄

## 5. API Design
- RESTful API ?ㅺ퀎
- ?몄쬆/?멸?
- Rate limiting
- API 踰꾩쟾 愿由?
## 6. Security Requirements
- ?몄쬆 諛?沅뚰븳
- ?곗씠???뷀샇??- 蹂댁븞 痍⑥빟?????- 而댄뵆?쇱씠?몄뒪

## 7. Performance Requirements
- ?묐떟 ?쒓컙 紐⑺몴
- 泥섎━??紐⑺몴
- ?숈떆 ?ъ슜????- 理쒖쟻???꾨왂

## 8. Scalability & Availability
- ?뺤옣???ㅺ퀎
- 濡쒕뱶 諛몃윴??- ?μ븷 蹂듦뎄
- 紐⑤땲?곕쭅

## 9. Development Guidelines
- 肄붾뵫 而⑤깽??- Git ?뚰겕?뚮줈??- ?뚯뒪???꾨왂
- CI/CD ?뚯씠?꾨씪??
## 10. Implementation Roadmap
- Phase蹂?湲곗닠 援ы쁽 怨꾪쉷
- 留덉씪?ㅽ넠
- 湲곗닠 遺梨?愿由?
**以묒슂:**
- ?ㅼ젣 援ы쁽 媛?ν븳 援ъ껜?곸씤 湲곗닠 ?ㅽ럺???쒖떆?섏꽭??- ?????웾??怨좊젮???꾩떎?곸씤 湲곗닠 ?좏깮???섏꽭??- ?뺤옣?깃낵 ?좎?蹂댁닔?깆쓣 怨좊젮?섏꽭??- 留덊겕?ㅼ슫 ?뺤떇?쇰줈 ?묒꽦?섏꽭??;
        }

        // ?ъ슜???낅젰 湲곕컲 TRD ?댁슜 ?앹꽦
        function createTRDContent(input) {
            return `# Technical Requirements Document

## 1. Technical Overview
${input.insight ? `"${input.insight}"` : '?ъ슜???뺤쓽 ?듭떖 ?몄궗?댄듃'}瑜??닿껐?섍린 ?꾪븳 湲곗닠???붾（?섏엯?덈떎. ${input.capability ? `?????웾??${input.capability}???쒖슜?섏뿬 援ы쁽?⑸땲??` : '?ъ슜???????웾??湲곕컲?쇰줈 援ы쁽?⑸땲??'}

## 2. System Architecture
**?꾩껜 ?꾪궎?띿쿂:**
- **Frontend**: ?ъ슜???명꽣?섏씠??- **Backend**: 鍮꾩쫰?덉뒪 濡쒖쭅 泥섎━
- **Database**: ?곗씠?????諛?愿由?- **Integration**: ?몃? ?쒖뒪???곕룞

## 3. Technology Stack
**湲곗닠 ?ㅽ깮 ?좏깮 湲곗?:**
${input.capability ? `- ? ??웾: ${input.capability}` : '- ? ??웾 湲곕컲 湲곗닠 ?좏깮'}

**沅뚯옣 湲곗닠:**
- **Frontend**: React.js, Vue.js, Angular
- **Backend**: Node.js, Python, Java
- **Database**: PostgreSQL, MySQL, MongoDB
- **Infrastructure**: Docker, Kubernetes

## 4. Data Architecture
**?곗씠???ㅺ퀎:**
- **?ъ슜???곗씠??*: ?꾨줈??諛??ㅼ젙
- **鍮꾩쫰?덉뒪 ?곗씠??*: ?듭떖 鍮꾩쫰?덉뒪 濡쒖쭅
- **遺꾩꽍 ?곗씠??*: ?깃낵 諛?吏??- **濡쒓렇 ?곗씠??*: ?쒖뒪??紐⑤땲?곕쭅

## 5. API Design
**API ?ㅺ퀎 ?먯튃:**
- **RESTful API**: ?쒖? HTTP 硫붿꽌??- **?몄쬆**: JWT ?먮뒗 OAuth 2.0
- **Rate Limiting**: ?쒕퉬??蹂댄샇
- **踰꾩쟾 愿由?*: API ?명솚??
## 6. Security Requirements
**蹂댁븞 ?붽뎄?ы빆:**
${input.principle ? `- ${input.principle} 以?? : '- ?ъ슜???뺤쓽 蹂댁븞 ?먯튃'}

**蹂댁븞 援ы쁽:**
- **?몄쬆**: ?ъ슜???몄쬆 ?쒖뒪??- **?뷀샇??*: ?곗씠???뷀샇??- **HTTPS**: ?듭떊 蹂댁븞
- **?곗씠??蹂댄샇**: 媛쒖씤?뺣낫 蹂댄샇

## 7. Performance Requirements
**?깅뒫 紐⑺몴:**
${input.success_metric ? `- ${input.success_metric} ?ъ꽦???꾪븳 ?깅뒫 理쒖쟻?? : '- ?ъ슜???뺤쓽 ?깃났 吏???ъ꽦'}

**?깅뒫 吏??**
- **?묐떟 ?쒓컙**: 3珥??대궡
- **泥섎━??*: ?덉긽 ?ъ슜???????- **媛?⑹꽦**: 99% ?댁긽
- **?뺤옣??*: ?ъ슜??利앷? ???
## 8. Scalability & Availability
**?뺤옣???ㅺ퀎:**
- **濡쒕뱶 諛몃윴??*: ?몃옒??遺꾩궛
- **?먮룞 ?ㅼ??쇰쭅**: 由ъ냼???먮룞 議곗젙
- **?μ븷 蹂듦뎄**: 怨좉??⑹꽦 蹂댁옣
- **紐⑤땲?곕쭅**: ?ㅼ떆媛??곹깭 ?뺤씤

## 9. Development Guidelines
**媛쒕컻 媛?대뱶?쇱씤:**
- **肄붾뵫 而⑤깽??*: ? ?쒖? 以??- **Git ?뚰겕?뚮줈??*: ?묒뾽 ?꾨줈?몄뒪
- **?뚯뒪??*: ?덉쭏 蹂댁쬆
- **CI/CD**: ?먮룞?붾맂 諛고룷

## 10. Implementation Roadmap
**援ы쁽 怨꾪쉷:**
- **Phase 1**: 湲곕낯 ?명봽??援ъ텞 (1-2媛쒖썡)
- **Phase 2**: ?듭떖 湲곕뒫 媛쒕컻 (2-3媛쒖썡)
- **Phase 3**: ?듯빀 諛??뚯뒪??(1媛쒖썡)
- **Phase 4**: 異쒖떆 諛??댁쁺 (吏?띿쟻)

**留덉씪?ㅽ넠:**
- MVP 媛쒕컻 ?꾨즺
- 踰좏? ?뚯뒪???꾨즺
- ?뺤떇 異쒖떆
- ?댁쁺 ?덉젙??
---

*??臾몄꽌???ъ슜???낅젰 ?곗씠?곕? 諛뷀깢?쇰줈 ?앹꽦?섏뿀?듬땲??*
*?앹꽦?? ${new Date().toLocaleDateString('ko-KR')}*
*?꾨줈?앺듃 ID: ${projectData.id}*`;
        }

        // TRD ?쒖떆
        function displayTRD(content) {
            document.getElementById('trdGenerating').style.display = 'none';
            document.getElementById('trdContentWrapper').style.display = 'block';
            document.getElementById('trdContent').innerHTML = convertMarkdownToHTML(content);
            document.getElementById('trdBadge').textContent = '?앹꽦 ?꾨즺';
            document.getElementById('trdBadge').className = 'document-badge badge-generated';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // TRD ?ㅻ쪟 ?쒖떆
        function showTRDError(errorMessage) {
            document.getElementById('trdGenerating').style.display = 'none';
            document.getElementById('trdError').style.display = 'block';
            document.getElementById('trdErrorText').textContent = errorMessage;
        }

        // TRD ?ъ깮??        async function regenerateTRD() {
            document.getElementById('trdContentWrapper').style.display = 'none';
            document.getElementById('trdGenerating').style.display = 'block';
            document.getElementById('trdBadge').textContent = '?앹꽦 以?;
            document.getElementById('trdBadge').className = 'document-badge badge-generating';
            
            await generateTRD();
        }

        // TRD ?ъ떆??        async function retryTRDGeneration() {
            document.getElementById('trdError').style.display = 'none';
            document.getElementById('trdGenerating').style.display = 'block';
            
            await generateTRD();
        }

        // 留덊겕?ㅼ슫??HTML濡?蹂??(媛꾨떒??援ы쁽)
        function convertMarkdownToHTML(markdown) {
            let html = markdown;
            
            // ?ㅻ뵫
            html = html.replace(/^### (.*$)/gim, '<h3>$1</h3>');
            html = html.replace(/^## (.*$)/gim, '<h2>$1</h2>');
            html = html.replace(/^# (.*$)/gim, '<h2>$1</h2>');
            
            // 蹂쇰뱶
            html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            // ?댄깶由?            html = html.replace(/\*(.*?)\*/g, '<em>$1</em>');
            
            // 由ъ뒪??            html = html.replace(/^\- (.*$)/gim, '<li>$1</li>');
            html = html.replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>');
            
            // 以꾨컮轅?            html = html.replace(/\n\n/g, '</p><p>');
            html = '<p>' + html + '</p>';
            
            return html;
        }

        // TRD 嫄대꼫?곌린
        function skipToComplete() {
            projectData.updateStatus('completed');
            document.getElementById('prdScreen').classList.remove('active');
            document.getElementById('finalCompletionScreen').classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ?꾨줈?앺듃 ?꾨즺
        function completeProject() {
            projectData.approveDocument('trd');
            projectData.updateStatus('completed');
            
            document.getElementById('trdScreen').classList.remove('active');
            document.getElementById('finalCompletionScreen').classList.add('active');
            
            document.getElementById('trdBadge').textContent = '?뱀씤??;
            document.getElementById('trdBadge').className = 'document-badge badge-approved';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            console.log('?럦 ?꾨줈?앺듃 ?꾨즺!', projectData.getSummary());
        }

        // ?곕え ?곗씠???앹꽦 (?뚯뒪?몄슜)
        function generateDemoData() {
            const demoBRD = `# Business Requirements Document

## 1. Executive Summary
???꾨줈?앺듃??AI 湲곕컲 由щ럭 寃利??쒖뒪?쒖쓣 ?듯빐 ?⑤씪???쇳븨???좊ː?깆쓣 ?믪씠??寃껋쓣 紐⑺몴濡??⑸땲??

## 2. Business Objectives
- 媛吏?由щ럭 ?먯???95% ?댁긽 ?ъ꽦
- ?ъ슜??援щℓ ?꾪솚??30% ?μ긽
- ?뚮옯???좊ː??吏??4.5/5 ?댁긽

## 3. Market Analysis
- ?⑤씪???쇳븨 ?쒖옣 洹쒕え: ??500議곗썝
- 媛吏?由щ럭濡??명븳 ?먯떎: ??50議곗썝
- ?寃?怨좉컼: 20-40? ?⑤씪???쇳븨 ?댁슜??
## 4. Problem Statement
?꾩옱 ?⑤씪???쇳븨?먯꽌 媛吏?由щ럭濡??명븳 ?좊ː??臾몄젣媛 ?ш컖?⑸땲??

## 5. Proposed Solution
AI 湲곕컲 由щ럭 寃利??쒖뒪?쒖쓣 ?듯빐 ?ㅼ젣 援щℓ?먮쭔??寃利앸맂 由щ럭瑜??쒓났?⑸땲??

## 6. Success Criteria
- ?붽컙 ?쒖꽦 ?ъ슜??5留뚮챸
- 由щ럭 ?좊ː???됯? 4.5/5 ?댁긽
- 援щℓ ?꾪솚??30% ?μ긽

## 7. Stakeholders
- ?쒗뭹 愿由ъ옄
- 媛쒕컻?
- 留덉??낇?
- 怨좉컼 ?쒕퉬?ㅽ?

## 8. Constraints & Risks
- 媛쒕컻 湲곌컙: 6媛쒖썡
- ?덉궛: 5?듭썝
- 湲곗닠??蹂듭옟??
## 9. Timeline & Milestones
- 1?④퀎: ?꾨줈?좏???媛쒕컻 (2媛쒖썡)
- 2?④퀎: 踰좏? ?뚯뒪??(1媛쒖썡)
- 3?④퀎: ?뺤떇 異쒖떆 (3媛쒖썡)

## 10. Budget & Resources
- 媛쒕컻鍮? 3?듭썝
- 留덉??낅퉬: 1?듭썝
- ?댁쁺鍮? 1?듭썝`;

            const demoPRD = `# Product Requirements Document

## 1. Product Overview
AI 湲곕컲 由щ럭 寃利??쒖뒪?쒖쑝濡??⑤씪???쇳븨???좊ː?깆쓣 ?믪씠???쒗뭹?낅땲??

## 2. User Personas
- **二쇰땲???쇳븨議?*: 20-30?, ?⑤씪???쇳븨 鍮덈쾲
- **媛議??쇳븨議?*: 30-40?, 媛議깆슜??援щℓ
- **?꾨━誘몄뾼 ?쇳븨議?*: 30-50?, 怨좉? ?쒗뭹 援щℓ

## 3. Feature Requirements
- **P0**: 由щ럭 寃利??뚭퀬由ъ쬁
- **P0**: 援щℓ ?대젰 ?뺤씤
- **P1**: ?좊ː???먯닔 ?쒖떆
- **P1**: 寃利?諛곗? ?쒖뒪??
## 4. User Stories
- ?ъ슜?먮뒗 援щℓ???쒗뭹?????由щ럭瑜??묒꽦?????덈떎
- ?ъ슜?먮뒗 由щ럭???좊ː?꾨? ?뺤씤?????덈떎
- ?ъ슜?먮뒗 寃利앸맂 由щ럭瑜??곗꽑?곸쑝濡?蹂????덈떎

## 5. User Experience
- 吏곴??곸씤 由щ럭 ?묒꽦 ?명꽣?섏씠??- 紐낇솗???좊ː???쒖떆
- 鍮좊Ⅸ 寃利??꾨줈?몄뒪

## 6. Functional Requirements
- 由щ럭 ?띿뒪??遺꾩꽍
- 援щℓ ?대젰 留ㅼ묶
- ?좊ː???먯닔 怨꾩궛
- 寃利?諛곗? 遺??
## 7. Non-Functional Requirements
- ?묐떟 ?쒓컙: 2珥??대궡
- 媛?⑹꽦: 99.9%
- 蹂댁븞: 媛쒖씤?뺣낫 蹂댄샇

## 8. Data Requirements
- 援щℓ ?대젰 ?곗씠??- 由щ럭 ?띿뒪???곗씠??- ?ъ슜???꾨줈???곗씠??
## 9. Integration Requirements
- ?쇳븨紐?API ?곕룞
- 寃곗젣 ?쒖뒪???곕룞
- ?ъ슜???몄쬆 ?쒖뒪??
## 10. Success Metrics
- 由щ럭 寃利??뺥솗?? 95%
- ?ъ슜??留뚯”?? 4.5/5
- ?쒖뒪??媛?⑹꽦: 99.9%`;

            const demoTRD = `# Technical Requirements Document

## 1. Technical Overview
留덉씠?щ줈?쒕퉬???꾪궎?띿쿂 湲곕컲??AI 由щ럭 寃利??쒖뒪?쒖엯?덈떎.

## 2. System Architecture
- **Frontend**: React.js + TypeScript
- **Backend**: Node.js + Express
- **AI Engine**: Python + TensorFlow
- **Database**: PostgreSQL + Redis

## 3. Technology Stack
- **Frontend**: React, TypeScript, Material-UI
- **Backend**: Node.js, Express, TypeScript
- **AI/ML**: Python, TensorFlow, scikit-learn
- **Database**: PostgreSQL, Redis
- **Infrastructure**: Docker, Kubernetes

## 4. Data Architecture
- **PostgreSQL**: ?ъ슜???곗씠?? 援щℓ ?대젰
- **Redis**: ?몄뀡, 罹먯떆
- **MongoDB**: 由щ럭 ?띿뒪???곗씠??- **S3**: ?뚯씪 ??μ냼

## 5. API Design
- **RESTful API**: ?쒖? HTTP 硫붿꽌??- **?몄쬆**: JWT ?좏겙 湲곕컲
- **Rate Limiting**: 1000 req/min
- **API 踰꾩쟾**: v1

## 6. Security Requirements
- **?몄쬆**: JWT + OAuth 2.0
- **?뷀샇??*: AES-256
- **HTTPS**: TLS 1.3
- **?곗씠??蹂댄샇**: GDPR 以??
## 7. Performance Requirements
- **?묐떟 ?쒓컙**: 2珥??대궡
- **泥섎━??*: 1000 req/sec
- **?숈떆 ?ъ슜??*: 10,000紐?- **理쒖쟻??*: CDN, 罹먯떛

## 8. Scalability & Availability
- **濡쒕뱶 諛몃윴??*: Nginx
- **?먮룞 ?ㅼ??쇰쭅**: Kubernetes HPA
- **?μ븷 蹂듦뎄**: Multi-AZ 諛고룷
- **紐⑤땲?곕쭅**: Prometheus + Grafana

## 9. Development Guidelines
- **肄붾뵫 而⑤깽??*: ESLint + Prettier
- **Git ?뚰겕?뚮줈??*: GitFlow
- **?뚯뒪??*: Jest + Cypress
- **CI/CD**: GitHub Actions

## 10. Implementation Roadmap
- **Phase 1**: 湲곕낯 ?명봽??援ъ텞 (2媛쒖썡)
- **Phase 2**: AI 紐⑤뜽 媛쒕컻 (2媛쒖썡)
- **Phase 3**: ?듯빀 諛??뚯뒪??(2媛쒖썡)`;

            // ?곕え ?곗씠?곕? ?꾨줈?앺듃?????            projectData.completeDocumentGeneration('brd', demoBRD);
            projectData.completeDocumentGeneration('prd', demoPRD);
            projectData.completeDocumentGeneration('trd', demoTRD);
            
            console.log('?렞 ?곕え ?곗씠???앹꽦 ?꾨즺!');
            alert('???곕え ?곗씠?곌? ?앹꽦?섏뿀?듬땲??\n\n?댁젣 PDF ???湲곕뒫???뚯뒪?명븷 ???덉뒿?덈떎.');
        }

        // ?대깽??由ъ뒪???ㅼ젙
        document.addEventListener('DOMContentLoaded', function() {
            console.log('?? DOM 濡쒕뱶 ?꾨즺, 珥덇린???쒖옉');
            
            // ??λ맂 ?곗씠??遺덈윭?ㅺ린
            loadSavedData();
            
            // DOM ?붿냼 議댁옱 ?뺤씤
            const nextBtn = document.getElementById('nextBtn');
            console.log('?뵇 DOM ?붿냼 ?뺤씤:', {
                nextBtn: !!nextBtn,
                nextBtnId: nextBtn ? nextBtn.id : 'N/A',
                nextBtnDisabled: nextBtn ? nextBtn.disabled : 'N/A'
            });
            
            // 媛?textarea???대깽??由ъ뒪??異붽?
            const fields = ['insight', 'validation', 'capability', 'principle', 'success', 'feature'];
            fields.forEach(fieldId => {
                const textarea = document.getElementById(fieldId);
                if (textarea) {
                    console.log(`?뱷 ${fieldId} ?꾨뱶???대깽??由ъ뒪??異붽?`);
                    textarea.addEventListener('input', function() {
                        console.log(`?봽 ${fieldId} ?낅젰 ?대깽??諛쒖깮`);
                        updateCharCount(fieldId);
                    });
                    textarea.addEventListener('blur', autoSave);
                } else {
                    console.error(`??${fieldId} ?꾨뱶瑜?李얠쓣 ???놁뒿?덈떎`);
                }
            });

            // 珥덇린 吏꾪뻾瑜??낅뜲?댄듃
            updateProgress();
            updateNextButton();

            // 媛쒕컻???꾧뎄???꾩뿭 ?⑥닔 ?몄텧
            window.projectData = projectData;
            window.resetProject = resetProject;
            window.downloadProjectData = downloadProjectData;
            window.generateDemoData = generateDemoData;
            window.currentStep = currentStep; // ?붾쾭源낆슜 ?꾩뿭 ?몄텧
            window.forceEnableNext = function() {
                const btn = document.getElementById('nextBtn');
                if (btn) {
                    btn.disabled = false;
                    console.log('?뵩 ?섎룞?쇰줈 ?ㅼ쓬 踰꾪듉 ?쒖꽦??);
                }
            };
            window.testButton = function() {
                console.log('?㎦ 踰꾪듉 ?뚯뒪???쒖옉');
                const btn = document.getElementById('nextBtn');
                const field = document.getElementById('insight');
                console.log('踰꾪듉:', btn);
                console.log('?꾨뱶:', field);
                console.log('?꾩옱 ?④퀎:', currentStep);
                console.log('?꾩옱 ?꾨뱶 ID:', getCurrentFieldId());
                updateNextButton();
            };
            
            console.log('?렞 ?쒗뭹 臾몄꽌 ?앹꽦 ?쒖뒪??珥덇린???꾨즺');
            console.log('?뮕 媛쒕컻???꾧뎄 紐낅졊??');
            console.log('  - projectData: ?꾩옱 ?꾨줈?앺듃 ?곗씠???뺤씤');
            console.log('  - projectData.getSummary(): ?꾨줈?앺듃 ?붿빟');
            console.log('  - downloadProjectData(): JSON ?뚯씪濡??대낫?닿린');
            console.log('  - resetProject(): ?곗씠??珥덇린??);
            console.log('  - generateDemoData(): ?곕え ?곗씠???앹꽦 (PDF ?뚯뒪?몄슜)');
        });

        // PDF ?대낫?닿린 ?⑥닔??        function exportBRDtoPDF() {
            downloadAsFile(projectData.documents.brd.content, 'BRD', 'md');
        }

        function exportPRDtoPDF() {
            downloadAsFile(projectData.documents.prd.content, 'PRD', 'md');
        }

        function exportTRDtoPDF() {
            downloadAsFile(projectData.documents.trd.content, 'TRD', 'md');
        }

        function downloadAsFile(content, docType, extension) {
            if (!content || content.trim() === '') {
                alert(`?좑툘 ${docType} 臾몄꽌媛 ?꾩쭅 ?앹꽦?섏? ?딆븯?듬땲??\n癒쇱? 臾몄꽌瑜??앹꽦?댁＜?몄슂.`);
                return;
            }

            const blob = new Blob([content], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `${docType}_${projectData.id}_${Date.now()}.${extension}`;
            link.click();
            URL.revokeObjectURL(url);
            
            console.log(`??${docType} ?ㅼ슫濡쒕뱶 ?꾨즺:`, link.download);
        }

        // 臾몄꽌 蹂듭궗 湲곕뒫
        function copyBRD() {
            copyToClipboard(projectData.documents.brd.content, 'BRD');
        }

        function copyPRD() {
            copyToClipboard(projectData.documents.prd.content, 'PRD');
        }

        function copyTRD() {
            copyToClipboard(projectData.documents.trd.content, 'TRD');
        }

        function copyToClipboard(text, docType) {
            if (!text || text.trim() === '') {
                alert(`?좑툘 ${docType} 臾몄꽌媛 ?꾩쭅 ?앹꽦?섏? ?딆븯?듬땲??\n癒쇱? 臾몄꽌瑜??앹꽦?댁＜?몄슂.`);
                return;
            }

            navigator.clipboard.writeText(text).then(() => {
                alert(`??${docType}媛 ?대┰蹂대뱶??蹂듭궗?섏뿀?듬땲??`);
                console.log(`??${docType} 蹂듭궗 ?꾨즺`);
            }).catch(err => {
                console.error('蹂듭궗 ?ㅽ뙣:', err);
                alert('蹂듭궗???ㅽ뙣?덉뒿?덈떎. ?ㅼ떆 ?쒕룄?댁＜?몄슂.');
            });
        }

        // 紐⑤뱺 臾몄꽌 ?ㅼ슫濡쒕뱶
        function downloadAllDocuments() {
            let downloadCount = 0;
            
            // BRD
            if (projectData.documents.brd.status !== 'pending' && projectData.documents.brd.content) {
                downloadAsFile(projectData.documents.brd.content, 'BRD', 'md');
                downloadCount++;
            }
            
            // PRD
            if (projectData.documents.prd.status !== 'pending' && projectData.documents.prd.content) {
                setTimeout(() => {
                    downloadAsFile(projectData.documents.prd.content, 'PRD', 'md');
                }, 300);
                downloadCount++;
            }
            
            // TRD
            if (projectData.documents.trd.status !== 'pending' && projectData.documents.trd.content) {
                setTimeout(() => {
                    downloadAsFile(projectData.documents.trd.content, 'TRD', 'md');
                }, 600);
                downloadCount++;
            }
            
            // ?꾨줈?앺듃 ?곗씠??JSON
            setTimeout(() => {
                const dataStr = projectData.exportJSON();
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `project_data_${projectData.id}.json`;
                link.click();
                URL.revokeObjectURL(url);
            }, 900);
            
            if (downloadCount > 0) {
                alert(`?벀 ${downloadCount}媛?臾몄꽌瑜??ㅼ슫濡쒕뱶?⑸땲??\n\n?ㅼ슫濡쒕뱶 ?대뜑瑜??뺤씤?댁＜?몄슂.`);
            } else {
                alert('?좑툘 ?ㅼ슫濡쒕뱶??臾몄꽌媛 ?놁뒿?덈떎.\n癒쇱? 臾몄꽌瑜??앹꽦?댁＜?몄슂.');
            }
        }

        // ???꾨줈?앺듃 ?쒖옉
        function startNewProject() {
            if (confirm('?봽 ???꾨줈?앺듃瑜??쒖옉?섏떆寃좎뒿?덇퉴?\n\n?꾩옱 ?꾨줈?앺듃??濡쒖뺄 ??μ냼??蹂닿??⑸땲??')) {
                // ?꾩옱 ?꾨줈?앺듃瑜?諛깆뾽
                const backup = projectData.exportJSON();
                localStorage.setItem(`project_backup_${projectData.id}`, backup);
                
                // ???꾨줈?앺듃 ?앹꽦
                projectData = new ProjectData();
                localStorage.setItem('projectData', JSON.stringify(projectData));
                
                // ?섏씠吏 ?덈줈怨좎묠
                location.reload();
            }
        }

        // ?곗씠??珥덇린???⑥닔 (媛쒕컻/?뚯뒪?몄슜)
        function resetProject() {
            if (confirm('?좑툘 紐⑤뱺 ?곗씠?곕? 珥덇린?뷀븯?쒓쿋?듬땲源?')) {
                localStorage.clear();
                projectData = new ProjectData();
                location.reload();
            }
        }

        // ?곗씠???대낫?닿린 ?⑥닔 (媛쒕컻/?뚯뒪?몄슜)
        function downloadProjectData() {
            const dataStr = projectData.exportJSON();
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `project_${projectData.id}_${Date.now()}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        // ?ㅻ낫???⑥텞??        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                if (!document.getElementById('nextBtn').disabled) {
                    nextStep();
                }
            }
            
            // 媛쒕컻???⑥텞?? Ctrl+Shift+D濡??곗씠???ㅼ슫濡쒕뱶
            if (e.ctrlKey && e.shiftKey && e.key === 'D') {
                e.preventDefault();
                downloadProjectData();
            }
            
            // 媛쒕컻???⑥텞?? Ctrl+Shift+R濡??곗씠??由ъ뀑
            if (e.ctrlKey && e.shiftKey && e.key === 'R') {
                e.preventDefault();
                resetProject();
            }
        });
    </script>
</body>
</html>
